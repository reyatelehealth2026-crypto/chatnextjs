generator client {
  provider = "prisma-client-js"
}

model AutoTagRule {
  id            Int      @id @default(autoincrement())
  lineAccountId Int?     @map("line_account_id")
  tagId         Int      @map("tag_id")
  ruleName      String   @map("rule_name") @db.VarChar(100)
  triggerType   String   @map("trigger_type") @db.VarChar(50)
  conditions    String   @db.LongText
  isActive      Boolean  @default(true) @map("is_active")
  priority      Int      @default(0)
  createdAt     DateTime @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt     DateTime @default(now()) @map("updated_at") @db.Timestamp(0)

  tag UserTag @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@index([lineAccountId], map: "idx_line_account")
  @@index([isActive], map: "idx_active")
  @@index([triggerType], map: "idx_trigger")
  @@index([tagId], map: "tag_id")
  @@map("auto_tag_rules")
}

model ConversationAssignment {
  id         Int       @id @default(autoincrement())
  userId     Int       @map("user_id")
  adminId    Int       @map("assigned_to")
  assignedBy Int?      @map("assigned_by")
  assignedAt DateTime  @default(now()) @map("assigned_at") @db.Timestamp(0)
  status     String    @default("active") @db.VarChar(50)
  resolvedAt DateTime? @map("resolved_at") @db.Timestamp(0)

  user     LineUser     @relation(fields: [userId], references: [id], onDelete: Cascade)
  admin    AdminUser  @relation("AssignedAdmin", fields: [adminId], references: [id], onDelete: Cascade)
  assigner AdminUser? @relation("AssignerAdmin", fields: [assignedBy], references: [id])

  @@unique([userId], map: "unique_user")
  @@index([adminId], map: "idx_assigned_to")
  @@index([status], map: "idx_status")
  @@map("conversation_assignments")
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model account_daily_stats {
  id                Int      @id @default(autoincrement())
  line_account_id   Int
  stat_date         DateTime @db.Date
  new_followers     Int?     @default(0)
  unfollowers       Int?     @default(0)
  total_messages    Int?     @default(0)
  incoming_messages Int?     @default(0)
  outgoing_messages Int?     @default(0)
  unique_users      Int?     @default(0)
  created_at        DateTime @default(now()) @db.Timestamp(0)
  updated_at        DateTime @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, stat_date], map: "unique_account_date")
  @@index([line_account_id], map: "idx_stats_account")
  @@index([stat_date], map: "idx_stats_date")
}

model account_events {
  id               Int      @id @default(autoincrement())
  line_account_id  Int
  event_type       String   @db.VarChar(50)
  line_user_id     String   @db.VarChar(50)
  user_id          Int?
  event_data       String?  @db.LongText
  webhook_event_id String?  @db.VarChar(100)
  source_type      String?  @default("user") @db.VarChar(20)
  source_id        String?  @db.VarChar(50)
  reply_token      String?  @db.VarChar(255)
  timestamp        BigInt?
  created_at       DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_account_events_account")
  @@index([created_at], map: "idx_account_events_created")
  @@index([event_type], map: "idx_account_events_type")
  @@index([line_user_id], map: "idx_account_events_user")
  @@index([webhook_event_id], map: "idx_account_events_webhook")
}

model account_followers {
  id                  Int       @id @default(autoincrement())
  line_account_id     Int
  line_user_id        String    @db.VarChar(50)
  user_id             Int?
  display_name        String?   @db.VarChar(255)
  picture_url         String?   @db.Text
  status_message      String?   @db.Text
  is_following        Boolean?  @default(true)
  followed_at         DateTime  @default(now()) @db.Timestamp(0)
  unfollowed_at       DateTime? @db.Timestamp(0)
  follow_count        Int?      @default(1)
  last_interaction_at DateTime? @db.Timestamp(0)
  total_messages      Int?      @default(0)
  created_at          DateTime  @default(now()) @db.Timestamp(0)
  updated_at          DateTime  @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, line_user_id], map: "unique_account_follower")
  @@index([line_account_id], map: "idx_followers_account")
  @@index([followed_at], map: "idx_followers_date")
  @@index([is_following], map: "idx_followers_following")
  @@index([line_user_id], map: "idx_followers_user")
}

model account_payables {
  id              Int                      @id @default(autoincrement())
  line_account_id Int?
  ap_number       String                   @unique(map: "ap_number") @db.VarChar(50)
  supplier_id     Int
  po_id           Int?
  gr_id           Int?
  invoice_number  String?                  @db.VarChar(100)
  invoice_date    DateTime?                @db.Date
  due_date        DateTime                 @db.Date
  total_amount    Decimal                  @db.Decimal(12, 2)
  paid_amount     Decimal?                 @default(0.00) @db.Decimal(12, 2)
  balance         Decimal                  @db.Decimal(12, 2)
  status          account_payables_status? @default(open)
  notes           String?                  @db.Text
  metadata        String?                  @db.LongText
  closed_at       DateTime?                @db.Timestamp(0)
  created_at      DateTime                 @default(now()) @db.Timestamp(0)
  updated_at      DateTime                 @default(now()) @db.Timestamp(0)

  @@index([due_date], map: "idx_ap_due_date")
  @@index([gr_id], map: "idx_ap_gr")
  @@index([line_account_id], map: "idx_ap_line_account")
  @@index([po_id], map: "idx_ap_po")
  @@index([status], map: "idx_ap_status")
  @@index([supplier_id], map: "idx_ap_supplier")
}

model account_receivables {
  id              Int                         @id @default(autoincrement())
  line_account_id Int?
  ar_number       String                      @unique(map: "ar_number") @db.VarChar(50)
  user_id         Int
  transaction_id  Int?
  invoice_number  String?                     @db.VarChar(100)
  invoice_date    DateTime?                   @db.Date
  due_date        DateTime                    @db.Date
  total_amount    Decimal                     @db.Decimal(12, 2)
  received_amount Decimal?                    @default(0.00) @db.Decimal(12, 2)
  balance         Decimal                     @db.Decimal(12, 2)
  status          account_receivables_status? @default(open)
  notes           String?                     @db.Text
  metadata        String?                     @db.LongText
  closed_at       DateTime?                   @db.Timestamp(0)
  created_at      DateTime                    @default(now()) @db.Timestamp(0)
  updated_at      DateTime                    @default(now()) @db.Timestamp(0)

  @@index([due_date], map: "idx_ar_due_date")
  @@index([line_account_id], map: "idx_ar_line_account")
  @@index([status], map: "idx_ar_status")
  @@index([transaction_id], map: "idx_ar_transaction")
  @@index([user_id], map: "idx_ar_user")
}

model activity_logs {
  id              BigInt   @id @default(autoincrement())
  log_type        String   @db.VarChar(50)
  action          String   @db.VarChar(50)
  description     String?  @db.Text
  user_id         Int?
  user_name       String?  @db.VarChar(255)
  admin_id        Int?
  admin_name      String?  @db.VarChar(255)
  entity_type     String?  @db.VarChar(100)
  entity_id       Int?
  old_value       String?  @db.LongText
  new_value       String?  @db.LongText
  ip_address      String?  @db.VarChar(45)
  user_agent      String?  @db.Text
  request_url     String?  @db.VarChar(500)
  line_account_id Int?
  session_id      String?  @db.VarChar(100)
  extra_data      String?  @db.LongText
  created_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([action], map: "idx_action")
  @@index([admin_id], map: "idx_admin_id")
  @@index([created_at], map: "idx_created_at")
  @@index([entity_type, entity_id], map: "idx_entity")
  @@index([line_account_id], map: "idx_line_account")
  @@index([log_type], map: "idx_log_type")
  @@index([user_id], map: "idx_user_id")
}

model admin_activity_log {
  id              Int      @id @default(autoincrement())
  admin_id        Int
  line_account_id Int?
  action          String   @db.VarChar(50)
  details         String?  @db.Text
  ip_address      String?  @db.VarChar(45)
  user_agent      String?  @db.VarChar(255)
  created_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([action], map: "idx_action")
  @@index([admin_id], map: "idx_admin_id")
  @@index([created_at], map: "idx_created_at")
}

model admin_bot_access {
  id                 Int      @id @default(autoincrement())
  admin_id           Int
  line_account_id    Int
  can_view           Boolean? @default(true)
  can_edit           Boolean? @default(true)
  can_broadcast      Boolean? @default(true)
  can_manage_users   Boolean? @default(true)
  can_manage_shop    Boolean? @default(true)
  can_view_analytics Boolean? @default(true)
  granted_by         Int?
  granted_at         DateTime @default(now()) @db.Timestamp(0)

  @@unique([admin_id, line_account_id], map: "unique_admin_bot")
}

model admin_quick_access {
  id            Int      @id @default(autoincrement())
  admin_user_id Int
  menu_key      String   @db.VarChar(50)
  sort_order    Int?     @default(0)
  created_at    DateTime @default(now()) @db.Timestamp(0)

  @@unique([admin_user_id, menu_key], map: "unique_user_menu")
  @@index([admin_user_id], map: "idx_admin_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model AdminUser {
  id                  Int       @id @default(autoincrement())
  username            String    @unique(map: "username") @db.VarChar(100)
  email               String    @unique(map: "email") @db.VarChar(255)
  phone               String?   @db.VarChar(20)
  password            String    @db.VarChar(255)
  displayName         String?   @map("display_name") @db.VarChar(255)
  avatarUrl           String?   @map("avatar_url") @db.VarChar(500)
  role                String?   @default("admin") @db.VarChar(20)
  lineAccountId       Int?      @map("line_account_id")
  isActive            Boolean?  @default(true) @map("is_active")
  lastLogin           DateTime? @map("last_login") @db.Timestamp(0)
  loginCount          Int?      @default(0) @map("login_count")
  createdAt           DateTime  @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt           DateTime  @default(now()) @map("updated_at") @db.Timestamp(0)
  lineUserId          String?   @map("line_user_id") @db.VarChar(50)
  notificationEnabled Boolean?  @default(true) @map("notification_enabled")

  lineAccount             LineAccount?             @relation(fields: [lineAccountId], references: [id])
  botAccess               AdminBotAccess[]
  conversationAssignments ConversationAssignment[] @relation("AssignedAdmin")
  assignedConversations   ConversationAssignment[] @relation("AssignerAdmin")
  multiAssignments        ConversationAssignee[]   @relation("MultiAssignedAdmin")
  multiAssignedBy         ConversationAssignee[]   @relation("MultiAssignerAdmin")
  writtenNotes            CustomerNote[]

  @@index([lineAccountId], map: "idx_admin_users_line_account")
  @@index([role], map: "idx_admin_users_role")
  @@index([lineUserId], map: "idx_line_user")
  @@index([role, isActive], map: "idx_role_active")
  @@map("admin_users")
}

model ai_chat_logs {
  id               Int       @id @default(autoincrement())
  line_account_id  Int?
  user_id          Int?
  user_message     String?   @db.Text
  ai_response      String?   @db.Text
  response_time_ms Int?
  model_used       String?   @db.VarChar(50)
  created_at       DateTime? @default(now()) @db.Timestamp(0)
}

model ai_chat_settings {
  id                  Int      @id @default(autoincrement())
  line_account_id     Int?     @unique(map: "unique_account")
  is_enabled          Boolean? @default(false)
  gemini_api_key      String?  @db.VarChar(255)
  model               String?  @default("gemini-2.0-flash") @db.VarChar(50)
  system_prompt       String?  @db.Text
  temperature         Decimal? @default(0.7) @db.Decimal(2, 1)
  max_tokens          Int?     @default(500)
  response_style      String?  @default("friendly") @db.VarChar(50)
  language            String?  @default("th") @db.VarChar(10)
  fallback_message    String?  @db.Text
  business_info       String?  @db.Text
  product_knowledge   String?  @db.Text
  sender_name         String?  @db.VarChar(100)
  sender_icon         String?  @db.VarChar(500)
  quick_reply_buttons String?  @db.Text
  created_at          DateTime @default(now()) @db.Timestamp(0)
  updated_at          DateTime @default(now()) @db.Timestamp(0)
}

model ai_conversation_history {
  id              Int                          @id @default(autoincrement())
  user_id         Int
  line_account_id Int?
  session_id      String?                      @db.VarChar(50)
  role            ai_conversation_history_role
  content         String                       @db.Text
  created_at      DateTime                     @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_created_at")
  @@index([session_id], map: "idx_session_id")
  @@index([user_id], map: "idx_user_id")
}

model ai_conversations {
  id              Int                   @id @default(autoincrement())
  user_id         Int
  line_account_id Int?
  role            ai_conversations_role
  content         String                @db.Text
  tokens_used     Int?                  @default(0)
  created_at      DateTime              @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_ai_conv_created")
  @@index([user_id], map: "idx_ai_conv_user")
}

model ai_pharmacy_settings {
  id                          Int       @id @default(autoincrement())
  line_account_id             Int?      @unique(map: "unique_account")
  triage_enabled              Boolean?  @default(true)
  red_flag_enabled            Boolean?  @default(true)
  auto_recommend              Boolean?  @default(true)
  require_pharmacist_approval Boolean?  @default(true)
  video_call_enabled          Boolean?  @default(true)
  notification_line_token     String?   @db.VarChar(255)
  notification_email          String?   @db.VarChar(255)
  working_hours_start         DateTime? @default(dbgenerated("('09:00:00')")) @db.Time(0)
  working_hours_end           DateTime? @default(dbgenerated("('21:00:00')")) @db.Time(0)
  emergency_contact           String?   @db.VarChar(100)
  pharmacy_name               String?   @db.VarChar(200)
  pharmacy_license            String?   @db.VarChar(100)
  created_at                  DateTime  @default(now()) @db.Timestamp(0)
  updated_at                  DateTime  @default(now()) @db.Timestamp(0)
}

model ai_settings {
  id                 Int                  @id @default(autoincrement())
  line_account_id    Int?
  is_enabled         Boolean?             @default(false)
  system_prompt      String?              @db.Text
  model              String?              @default("gpt-3.5-turbo") @db.VarChar(50)
  max_tokens         Int?                 @default(500)
  temperature        Decimal?             @default(0.7) @db.Decimal(2, 1)
  gemini_api_key     String?              @db.VarChar(255)
  created_at         DateTime             @default(now()) @db.Timestamp(0)
  ai_mode            ai_settings_ai_mode? @default(sales)
  business_info      String?              @db.Text
  product_knowledge  String?              @db.Text
  sales_prompt       String?              @db.Text
  auto_load_products Boolean?             @default(true)
  product_load_limit Int?                 @default(50)
  sender_name        String?              @db.VarChar(100)
  sender_icon        String?              @db.VarChar(500)
}

model ai_triage_assessments {
  id                  Int                                       @id @default(autoincrement())
  user_id             Int
  line_account_id     Int?
  symptoms            String?                                   @db.Text
  duration            String?                                   @db.VarChar(100)
  severity            Int?
  severity_level      ai_triage_assessments_severity_level?     @default(low)
  associated_symptoms String?                                   @db.Text
  allergies           String?                                   @db.Text
  medical_conditions  String?                                   @db.Text
  current_medications String?                                   @db.Text
  ai_assessment       String?                                   @db.Text
  recommended_action  ai_triage_assessments_recommended_action? @default(self_care)
  pharmacist_notified Boolean?                                  @default(false)
  pharmacist_response String?                                   @db.Text
  status              ai_triage_assessments_status?             @default(pending)
  created_at          DateTime                                  @default(now()) @db.Timestamp(0)
  updated_at          DateTime                                  @default(now()) @db.Timestamp(0)

  @@index([severity_level], map: "idx_severity")
  @@index([status], map: "idx_status")
  @@index([user_id], map: "idx_user_id")
}

model ai_user_mode {
  id         Int      @id @default(autoincrement())
  user_id    Int      @unique(map: "unique_user")
  ai_mode    String   @db.VarChar(50)
  expires_at DateTime @db.DateTime(0)
  created_at DateTime @default(now()) @db.Timestamp(0)

  @@index([expires_at], map: "idx_expires")
}

model ai_user_pause {
  id          Int      @id @default(autoincrement())
  user_id     Int      @unique(map: "unique_user")
  pause_until DateTime @db.DateTime(0)
  reason      String?  @default("human_request") @db.VarChar(255)
  created_at  DateTime @default(now()) @db.Timestamp(0)

  @@index([pause_until], map: "idx_pause_until")
}

model analytics {
  id              Int      @id @default(autoincrement())
  line_account_id Int?
  event_type      String   @db.VarChar(50)
  event_data      String?  @db.LongText
  created_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_analytics_account")
  @@index([created_at], map: "idx_analytics_created")
  @@index([line_account_id], map: "idx_analytics_line_account")
}

model appointments {
  id                  Int                            @id @default(autoincrement())
  line_account_id     Int?
  user_id             Int
  pharmacist_id       Int?
  appointment_type    appointments_appointment_type? @default(consultation)
  appointment_date    DateTime                       @db.Date
  appointment_time    DateTime                       @db.Time(0)
  duration_minutes    Int?                           @default(30)
  status              appointments_status?           @default(pending)
  notes               String?                        @db.Text
  reminder_sent       Boolean?                       @default(false)
  created_at          DateTime                       @default(now()) @db.Timestamp(0)
  updated_at          DateTime                       @default(now()) @db.Timestamp(0)
  reminder_10min_sent Boolean?                       @default(false)
  reminder_now_sent   Boolean?                       @default(false)
  cancelled_reason    String?                        @db.Text

  @@index([appointment_date], map: "idx_appt_date")
  @@index([status], map: "idx_appt_status")
  @@index([user_id], map: "idx_appt_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model auto_replies {
  id                 Int                      @id @default(autoincrement())
  line_account_id    Int?
  keyword            String                   @db.VarChar(255)
  description        String?                  @db.VarChar(255)
  tags               String?                  @db.VarChar(255)
  match_type         auto_replies_match_type? @default(contains)
  reply_type         String?                  @default("text") @db.VarChar(50)
  reply_content      String                   @db.Text
  alt_text           String?                  @db.VarChar(400)
  sender_name        String?                  @db.VarChar(100)
  sender_icon        String?                  @db.VarChar(500)
  quick_reply        String?                  @db.LongText
  is_active          Boolean?                 @default(true)
  priority           Int?                     @default(0)
  use_count          Int?                     @default(0)
  last_used_at       DateTime?                @db.Timestamp(0)
  created_at         DateTime                 @default(now()) @db.Timestamp(0)
  enable_share       Boolean?                 @default(false)
  share_button_label String?                  @default("? แชร์ให้เพื่อน") @db.VarChar(50)

  @@index([line_account_id], map: "idx_reply_line_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model auto_reply_rules {
  id               Int                             @id @default(autoincrement())
  line_account_id  Int?
  keyword          String                          @db.VarChar(255)
  match_type       auto_reply_rules_match_type?    @default(contains)
  response_type    auto_reply_rules_response_type? @default(text)
  response_content String                          @db.Text
  priority         Int?                            @default(0)
  is_active        Boolean?                        @default(true)
  created_at       DateTime                        @default(now()) @db.Timestamp(0)
  updated_at       DateTime                        @default(now()) @db.Timestamp(0)

  @@index([is_active], map: "idx_active")
  @@index([keyword], map: "idx_keyword")
  @@index([line_account_id], map: "idx_line_account")
  @@index([priority], map: "idx_priority")
}

model auto_tag_logs {
  id           Int                  @id @default(autoincrement())
  user_id      Int
  tag_id       Int
  rule_id      Int?
  action       auto_tag_logs_action
  trigger_type String?              @db.VarChar(50)
  trigger_data String?              @db.LongText
  created_at   DateTime             @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_created")
  @@index([tag_id], map: "idx_tag")
  @@index([user_id], map: "idx_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model birthday_campaigns {
  id              Int                               @id @default(autoincrement())
  line_account_id Int?
  name            String                            @db.VarChar(255)
  days_before     Int?                              @default(0)
  send_time       DateTime?                         @default(dbgenerated("('09:00:00')")) @db.Time(0)
  message_type    birthday_campaigns_message_type?  @default(flex)
  message_content String                            @db.Text
  coupon_code     String?                           @db.VarChar(50)
  discount_type   birthday_campaigns_discount_type? @default(percent)
  discount_value  Decimal?                          @db.Decimal(10, 2)
  is_active       Boolean?                          @default(true)
  sent_count      Int?                              @default(0)
  created_at      DateTime                          @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_account")
}

model broadcast_campaigns {
  id               Int                               @id @default(autoincrement())
  line_account_id  Int?
  name             String                            @db.VarChar(255)
  message_type     broadcast_campaigns_message_type? @default(text)
  content          String?                           @db.LongText
  auto_tag_enabled Boolean?                          @default(false)
  tag_prefix       String?                           @db.VarChar(50)
  sent_count       Int?                              @default(0)
  click_count      Int?                              @default(0)
  status           broadcast_campaigns_status?       @default(draft)
  scheduled_at     DateTime?                         @db.Timestamp(0)
  sent_at          DateTime?                         @db.Timestamp(0)
  created_at       DateTime                          @default(now()) @db.Timestamp(0)
  updated_at       DateTime                          @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_account")
  @@index([status], map: "idx_status")
}

model broadcast_clicks {
  id           Int      @id @default(autoincrement())
  broadcast_id Int
  item_id      Int
  user_id      Int
  line_user_id String?  @db.VarChar(50)
  tag_assigned Boolean? @default(false)
  clicked_at   DateTime @default(now()) @db.Timestamp(0)

  @@index([broadcast_id], map: "idx_broadcast")
  @@index([clicked_at], map: "idx_clicked")
  @@index([user_id], map: "idx_user")
  @@index([item_id], map: "item_id")
}

model broadcast_items {
  id            Int      @id @default(autoincrement())
  broadcast_id  Int
  product_id    Int?
  item_name     String   @db.VarChar(255)
  item_image    String?  @db.VarChar(500)
  item_price    Decimal? @default(0.00) @db.Decimal(10, 2)
  postback_data String   @db.VarChar(255)
  tag_id        Int?
  click_count   Int?     @default(0)
  sort_order    Int?     @default(0)
  created_at    DateTime @default(now()) @db.Timestamp(0)

  @@index([broadcast_id], map: "idx_broadcast")
  @@index([postback_data], map: "idx_postback")
}

model broadcast_messages {
  id              Int                             @id @default(autoincrement())
  line_account_id Int?
  title           String                          @db.VarChar(255)
  message_type    String?                         @default("text") @db.VarChar(50)
  content         String                          @db.Text
  flex_json       String?                         @db.LongText
  target_type     broadcast_messages_target_type? @default(all)
  target_tags     String?                         @db.LongText
  target_segment  String?                         @db.LongText
  sent_count      Int?                            @default(0)
  success_count   Int?                            @default(0)
  fail_count      Int?                            @default(0)
  status          broadcast_messages_status?      @default(draft)
  scheduled_at    DateTime?                       @db.Timestamp(0)
  sent_at         DateTime?                       @db.Timestamp(0)
  created_by      Int?
  created_at      DateTime                        @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_broadcast_line_account")
  @@index([status], map: "idx_broadcast_status")
}

model broadcast_queue {
  id            Int                     @id @default(autoincrement())
  broadcast_id  Int
  user_id       Int
  status        broadcast_queue_status? @default(pending)
  sent_at       DateTime?               @db.Timestamp(0)
  error_message String?                 @db.Text
  created_at    DateTime                @default(now()) @db.Timestamp(0)

  @@index([broadcast_id], map: "idx_broadcast")
  @@index([status], map: "idx_status")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model broadcasts {
  id              Int                @id @default(autoincrement())
  line_account_id Int?
  title           String             @db.VarChar(255)
  message_type    String?            @default("text") @db.VarChar(50)
  content         String             @db.Text
  target_type     String?            @default("all") @db.VarChar(20)
  target_group_id Int?
  sent_count      Int?               @default(0)
  status          broadcasts_status? @default(draft)
  scheduled_at    DateTime?          @db.Timestamp(0)
  sent_at         DateTime?          @db.Timestamp(0)
  created_at      DateTime           @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_broadcast_line_account")
  @@index([status], map: "idx_broadcast_status")
}

model business_categories {
  id              Int      @id @default(autoincrement())
  line_account_id Int?
  name            String   @db.VarChar(100)
  description     String?  @db.Text
  image_url       String?  @db.VarChar(500)
  sort_order      Int?     @default(0)
  is_active       Boolean? @default(true)
  created_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_line_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model business_items {
  id                       Int                             @id @default(autoincrement())
  line_account_id          Int?
  item_type                business_items_item_type?       @default(physical)
  category_id              Int?
  name                     String                          @db.VarChar(255)
  name_en                  String?                         @db.VarChar(500)
  description              String?                         @db.LongText
  price                    Decimal                         @db.Decimal(10, 2)
  sale_price               Decimal?                        @db.Decimal(10, 2)
  cost_price               Decimal?                        @db.Decimal(10, 2)
  image_url                String?                         @db.VarChar(500)
  action_data              String?                         @db.LongText
  delivery_method          business_items_delivery_method? @default(shipping)
  validity_days            Int?
  max_quantity             Int?
  stock                    Int?                            @default(0)
  sku                      String?                         @db.VarChar(100)
  is_active                Boolean?                        @default(true)
  is_featured              Boolean?                        @default(false)
  is_flash_sale            Boolean?                        @default(false)
  is_choice                Boolean?                        @default(false)
  flash_sale_end           DateTime?                       @db.DateTime(0)
  is_promotion             Boolean?                        @default(false)
  promotion_start          DateTime?                       @db.DateTime(0)
  promotion_end            DateTime?                       @db.DateTime(0)
  featured_order           Int?                            @default(0)
  sort_order               Int?                            @default(0)
  created_at               DateTime                        @default(now()) @db.Timestamp(0)
  updated_at               DateTime                        @default(now()) @db.Timestamp(0)
  barcode                  String?                         @db.VarChar(100)
  manufacturer             String?                         @db.VarChar(255)
  active_ingredient        String?                         @db.Text
  generic_name             String?                         @db.VarChar(255)
  usage_instructions       String?                         @db.LongText
  unit                     String?                         @default("ชิ้น") @db.VarChar(50)
  extra_data               String?                         @db.LongText
  dosage_form              String?                         @db.VarChar(100)
  drug_category            String?                         @db.VarChar(50)
  strength                 String?                         @db.VarChar(100)
  warnings                 String?                         @db.Text
  contraindications        String?                         @db.Text
  dosage                   String?                         @db.VarChar(255)
  side_effects             String?                         @db.Text
  storage_conditions       String?                         @db.VarChar(200)
  requires_prescription    Boolean?                        @default(false)
  is_bestseller            Boolean?                        @default(false)
  min_stock                Int?                            @default(5)
  reorder_point            Int?                            @default(5)
  supplier_id              Int?
  storage_condition        String?                         @db.VarChar(255)
  movement_class           business_items_movement_class?  @default(C)
  storage_zone_type        String?                         @default("general") @db.VarChar(50)
  default_location_id      Int?
  requires_batch_tracking  Boolean?                        @default(false)
  requires_expiry_tracking Boolean?                        @default(false)
  base_unit                String?                         @db.VarChar(50)
  product_price            String?                         @db.LongText
  properties_other         String?                         @db.LongText
  photo_path               String?                         @db.VarChar(500)
  cny_id                   Int?
  cny_category             String?                         @db.VarChar(100)
  hashtag                  String?                         @db.VarChar(500)
  qty_incoming             Int?                            @default(0)
  enable                   Boolean?                        @default(true)
  last_synced_at           DateTime?                       @db.Timestamp(0)

  @@index([barcode], map: "idx_barcode")
  @@index([barcode], map: "idx_business_items_barcode")
  @@index([cny_id], map: "idx_business_items_cny_id")
  @@index([enable], map: "idx_business_items_enable")
  @@index([category_id], map: "idx_category")
  @@index([default_location_id], map: "idx_default_location")
  @@index([is_featured], map: "idx_featured")
  @@index([item_type], map: "idx_item_type")
  @@index([line_account_id], map: "idx_line_account")
  @@index([movement_class], map: "idx_movement_class")
  @@index([sku], map: "idx_sku")
  @@index([storage_zone_type], map: "idx_storage_zone_type")
}

model business_items_to_products_map {
  old_business_item_id Int      @id
  new_product_id       Int
  migrated_at          DateTime @default(now()) @db.Timestamp(0)

  @@index([new_product_id], map: "idx_new_product")
}

model business_settings {
  id                Int                              @id @default(autoincrement())
  business_type     business_settings_business_type? @default(hybrid)
  shop_name         String?                          @default("LINE Business") @db.VarChar(255)
  shop_logo         String?                          @db.VarChar(500)
  welcome_message   String?                          @db.Text
  shipping_fee      Decimal?                         @default(50.00) @db.Decimal(10, 2)
  free_shipping_min Decimal?                         @default(500.00) @db.Decimal(10, 2)
  bank_accounts     String?                          @db.LongText
  promptpay_number  String?                          @db.VarChar(20)
  digital_settings  String?                          @db.LongText
  service_settings  String?                          @db.LongText
  contact_phone     String?                          @db.VarChar(20)
  is_open           Boolean?                         @default(true)
  created_at        DateTime                         @default(now()) @db.Timestamp(0)
}

model cart {
  id         Int      @id @default(autoincrement())
  user_id    Int
  product_id Int
  quantity   Int?     @default(1)
  created_at DateTime @default(now()) @db.Timestamp(0)
  updated_at DateTime @default(now()) @db.Timestamp(0)

  @@unique([user_id, product_id], map: "unique_cart_item")
  @@index([user_id], map: "idx_cart_user")
}

model cart_items {
  id           Int      @id @default(autoincrement())
  user_id      Int
  line_user_id String   @db.VarChar(50)
  product_id   Int
  quantity     Int?     @default(1)
  created_at   DateTime @default(now()) @db.Timestamp(0)
  updated_at   DateTime @default(now()) @db.Timestamp(0)

  @@unique([line_user_id, product_id], map: "unique_user_product")
  @@index([line_user_id], map: "idx_line_user")
  @@index([product_id], map: "idx_product")
  @@index([user_id], map: "idx_user")
}

model cart_items_backup {
  id           Int      @id @default(autoincrement())
  line_user_id String   @db.VarChar(50)
  product_id   Int
  quantity     Int?     @default(1)
  created_at   DateTime @default(now()) @db.Timestamp(0)
  updated_at   DateTime @default(now()) @db.Timestamp(0)

  @@unique([line_user_id, product_id], map: "unique_user_product")
  @@index([line_user_id], map: "idx_line_user")
  @@index([product_id], map: "idx_product")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model category_points_bonus {
  id              Int      @id @default(autoincrement())
  line_account_id Int?
  category_id     Int
  multiplier      Decimal? @default(1.00) @db.Decimal(3, 2)
  created_at      DateTime @default(now()) @db.Timestamp(0)
  updated_at      DateTime @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, category_id], map: "unique_account_category")
  @@index([line_account_id], map: "idx_category_bonus_account")
  @@index([category_id], map: "idx_category_bonus_category")
}

model chat_status_history {
  id              Int       @id @default(autoincrement())
  user_id         Int
  line_account_id Int
  old_status      String?   @db.VarChar(50)
  new_status      String?   @db.VarChar(50)
  changed_by      Int?
  changed_at      DateTime? @default(now()) @db.Timestamp(0)
  note            String?   @db.Text

  @@index([changed_at], map: "idx_changed_at")
  @@index([user_id, line_account_id], map: "idx_user_status")
}

model cleanup_actions {
  id            Int                         @id @default(autoincrement())
  action_type   cleanup_actions_action_type
  file_path     String                      @db.VarChar(500)
  backup_id     String?                     @db.VarChar(100)
  reason        String?                     @db.Text
  executed_by   String?                     @db.VarChar(100)
  executed_at   DateTime?                   @default(now()) @db.DateTime(0)
  status        cleanup_actions_status?     @default(pending)
  error_message String?                     @db.Text

  @@index([action_type], map: "idx_action_type")
  @@index([backup_id], map: "idx_backup_id")
  @@index([executed_at], map: "idx_executed_at")
}

model cleanup_backups {
  id            Int                     @id @default(autoincrement())
  backup_id     String                  @unique(map: "backup_id") @db.VarChar(100)
  backup_path   String                  @db.VarChar(500)
  original_path String                  @db.VarChar(500)
  file_size     BigInt
  md5_checksum  String                  @db.VarChar(32)
  backed_up_at  DateTime?               @default(now()) @db.DateTime(0)
  restored_at   DateTime?               @db.DateTime(0)
  archived_at   DateTime?               @db.DateTime(0)
  status        cleanup_backups_status? @default(active)

  @@index([backed_up_at], map: "idx_backed_up_at")
  @@index([backup_id], map: "idx_backup_id")
  @@index([original_path], map: "idx_original_path")
}

model cleanup_inventory {
  id                 Int                       @id @default(autoincrement())
  file_path          String                    @db.VarChar(500)
  file_type          String                    @db.VarChar(50)
  category           String                    @db.VarChar(100)
  file_size          BigInt
  created_date       DateTime?                 @db.DateTime(0)
  modified_date      DateTime?                 @db.DateTime(0)
  last_accessed_date DateTime?                 @db.DateTime(0)
  md5_checksum       String?                   @db.VarChar(32)
  status             cleanup_inventory_status? @default(active)
  recommendation     String?                   @db.VarChar(50)
  scan_date          DateTime?                 @default(now()) @db.DateTime(0)

  @@index([category], map: "idx_category")
  @@index([file_path], map: "idx_file_path")
  @@index([status], map: "idx_status")
}

model cleanup_reports {
  id             Int                         @id @default(autoincrement())
  report_id      String                      @unique(map: "report_id") @db.VarChar(100)
  report_type    cleanup_reports_report_type
  files_scanned  Int?                        @default(0)
  files_deleted  Int?                        @default(0)
  files_archived Int?                        @default(0)
  space_freed    BigInt?                     @default(0)
  warnings_count Int?                        @default(0)
  errors_count   Int?                        @default(0)
  report_data    String?                     @db.LongText
  created_at     DateTime?                   @default(now()) @db.DateTime(0)

  @@index([created_at], map: "idx_created_at")
  @@index([report_type], map: "idx_report_type")
}

model cny_products {
  id               Int      @id @default(autoincrement())
  sku              String   @unique(map: "sku") @db.VarChar(100)
  barcode          String?  @db.VarChar(100)
  name             String?  @db.Text
  name_en          String?  @db.Text
  spec_name        String?  @db.Text
  description      String?  @db.Text
  properties_other String?  @db.Text
  how_to_use       String?  @db.Text
  photo_path       String?  @db.Text
  qty              Decimal? @default(0.00) @db.Decimal(10, 2)
  qty_incoming     Decimal? @default(0.00) @db.Decimal(10, 2)
  enable           String?  @default("1") @db.Char(1)
  product_price    String?  @db.LongText
  last_updated     DateTime @default(now()) @db.Timestamp(0)

  @@index([enable], map: "idx_enable")
  @@index([name(length: 100)], map: "idx_name")
  @@index([sku], map: "idx_sku")
}

model consent_logs {
  id              Int                 @id @default(autoincrement())
  user_id         Int
  consent_type    String              @db.VarChar(50)
  action          consent_logs_action
  consent_version String              @db.VarChar(20)
  ip_address      String?             @db.VarChar(45)
  user_agent      String?             @db.Text
  details         String?             @db.LongText
  created_at      DateTime?           @default(now()) @db.DateTime(0)

  @@index([created_at], map: "idx_created_at")
  @@index([user_id, consent_type], map: "idx_user_consent")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model consultation_analytics {
  id                      Int                                        @id @default(autoincrement())
  user_id                 Int
  pharmacist_id           Int?
  communication_type      consultation_analytics_communication_type?
  stage_at_close          String?                                    @db.VarChar(50)
  response_time_avg       Int?
  message_count           Int?
  ai_suggestions_shown    Int?                                       @default(0)
  ai_suggestions_accepted Int?                                       @default(0)
  resulted_in_purchase    Boolean?                                   @default(false)
  purchase_amount         Decimal?                                   @db.Decimal(12, 2)
  symptom_categories      String?                                    @db.LongText
  drugs_recommended       String?                                    @db.LongText
  successful_patterns     String?                                    @db.LongText
  created_at              DateTime?                                  @default(now()) @db.DateTime(0)

  @@index([created_at], map: "idx_created")
  @@index([pharmacist_id], map: "idx_pharmacist")
  @@index([resulted_in_purchase], map: "idx_purchase")
  @@index([user_id], map: "idx_user")
}

model consultation_logs {
  id             Int                         @id @default(autoincrement())
  appointment_id Int
  log_type       consultation_logs_log_type? @default(note)
  content        String?                     @db.Text
  created_by     String?                     @db.VarChar(50)
  created_at     DateTime                    @default(now()) @db.Timestamp(0)

  @@index([appointment_id], map: "appointment_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model consultation_stages {
  id                  Int                       @id @default(autoincrement())
  user_id             Int                       @unique(map: "uk_user")
  stage               consultation_stages_stage
  confidence          Decimal?                  @default(0.00) @db.Decimal(3, 2)
  signals             String?                   @db.LongText
  has_urgent_symptoms Boolean?                  @default(false)
  updated_at          DateTime?                 @default(now()) @db.DateTime(0)

  @@index([stage], map: "idx_stage")
  @@index([has_urgent_symptoms], map: "idx_urgent")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model ConversationAssignee {
  id         Int                                  @id @default(autoincrement())
  userId     Int                                  @map("user_id")
  adminId    Int                                  @map("admin_id")
  assignedBy Int?                                 @map("assigned_by")
  assignedAt DateTime?                            @default(now()) @map("assigned_at") @db.DateTime(0)
  status     conversation_multi_assignees_status? @default(active)
  resolvedAt DateTime?                            @map("resolved_at") @db.DateTime(0)

  user     LineUser     @relation(fields: [userId], references: [id], onDelete: Cascade)
  admin    AdminUser  @relation("MultiAssignedAdmin", fields: [adminId], references: [id], onDelete: Cascade)
  assigner AdminUser? @relation("MultiAssignerAdmin", fields: [assignedBy], references: [id])

  @@unique([userId, adminId], map: "uk_user_admin")
  @@index([adminId], map: "idx_admin")
  @@index([assignedAt], map: "idx_assigned_at")
  @@index([status], map: "idx_status")
  @@index([userId], map: "idx_user")
  @@map("conversation_multi_assignees")
}

model conversation_states {
  id            Int      @id @default(autoincrement())
  user_id       Int      @unique(map: "user_id")
  current_state String   @db.VarChar(50)
  state_data    String?  @db.LongText
  created_at    DateTime @default(now()) @db.Timestamp(0)
  updated_at    DateTime @default(now()) @db.Timestamp(0)

  @@index([user_id], map: "idx_user")
}

model coupon_usage {
  id              Int      @id @default(autoincrement())
  coupon_id       Int
  user_id         Int
  order_id        Int?
  discount_amount Decimal? @db.Decimal(10, 2)
  used_at         DateTime @default(now()) @db.Timestamp(0)

  @@index([coupon_id], map: "idx_coupon")
  @@index([order_id], map: "idx_order")
  @@index([user_id], map: "idx_user")
}

model coupons {
  id              Int                    @id @default(autoincrement())
  line_account_id Int?
  code            String                 @unique(map: "unique_code") @db.VarChar(50)
  name            String?                @db.VarChar(255)
  description     String?                @db.Text
  discount_type   coupons_discount_type? @default(fixed)
  discount_value  Decimal                @db.Decimal(10, 2)
  min_purchase    Decimal?               @default(0.00) @db.Decimal(10, 2)
  max_discount    Decimal?               @db.Decimal(10, 2)
  usage_limit     Int?
  usage_count     Int?                   @default(0)
  user_limit      Int?                   @default(1)
  start_date      DateTime?              @db.Timestamp(0)
  end_date        DateTime?              @db.Timestamp(0)
  is_active       Boolean?               @default(true)
  created_at      DateTime               @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_account")
  @@index([is_active], map: "idx_active")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model customer_health_profiles {
  id                     Int                                          @id @default(autoincrement())
  user_id                Int                                          @unique(map: "user_id")
  communication_type     customer_health_profiles_communication_type?
  confidence             Decimal?                                     @default(0.00) @db.Decimal(3, 2)
  chronic_conditions     String?                                      @db.LongText
  communication_tips     String?                                      @db.Text
  last_analyzed_at       DateTime?                                    @db.DateTime(0)
  message_count_analyzed Int?                                         @default(0)
  created_at             DateTime?                                    @default(now()) @db.DateTime(0)
  updated_at             DateTime?                                    @default(now()) @db.DateTime(0)

  @@index([communication_type], map: "idx_type")
  @@index([user_id], map: "idx_user")
}

model customer_segments {
  id                 Int                             @id @default(autoincrement())
  line_account_id    Int?
  name               String                          @db.VarChar(255)
  description        String?                         @db.Text
  segment_type       customer_segments_segment_type? @default(dynamic)
  conditions         String                          @db.LongText
  user_count         Int?                            @default(0)
  last_calculated_at DateTime?                       @db.Timestamp(0)
  is_active          Boolean?                        @default(true)
  created_at         DateTime                        @default(now()) @db.Timestamp(0)
  updated_at         DateTime                        @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_account")
}

model data_access_logs {
  id            Int       @id @default(autoincrement())
  admin_user_id Int?
  user_id       Int?
  action        String    @db.VarChar(100)
  resource_type String    @db.VarChar(50)
  resource_id   Int?
  ip_address    String?   @db.VarChar(45)
  user_agent    String?   @db.Text
  details       String?   @db.LongText
  created_at    DateTime? @default(now()) @db.DateTime(0)

  @@index([action], map: "idx_action")
  @@index([admin_user_id], map: "idx_admin_user")
  @@index([created_at], map: "idx_created_at")
  @@index([user_id], map: "idx_target_user")
}

model dev_logs {
  id         Int                @id @default(autoincrement())
  log_type   dev_logs_log_type? @default(info)
  source     String?            @db.VarChar(100)
  message    String?            @db.Text
  data       String?            @db.LongText
  user_id    String?            @db.VarChar(100)
  created_at DateTime           @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_created")
  @@index([source], map: "idx_source")
  @@index([log_type], map: "idx_type")
}

model dispensing_records {
  id              Int       @id @default(autoincrement())
  line_account_id Int?
  user_id         Int
  pharmacist_id   Int?
  order_number    String    @db.VarChar(50)
  items           String?   @db.LongText
  total_amount    Decimal?  @default(0.00) @db.Decimal(10, 2)
  payment_method  String?   @default("cash") @db.VarChar(50)
  payment_status  String?   @default("paid") @db.VarChar(20)
  notes           String?   @db.Text
  created_at      DateTime? @default(now()) @db.Timestamp(0)

  @@index([order_number], map: "order_number")
  @@index([user_id], map: "user_id")
}

model drip_campaign_logs {
  id            Int                       @id @default(autoincrement())
  campaign_id   Int
  step_id       Int
  user_id       Int
  line_user_id  String?                   @db.VarChar(50)
  status        drip_campaign_logs_status
  error_message String?                   @db.Text
  sent_at       DateTime                  @default(now()) @db.Timestamp(0)

  @@index([campaign_id], map: "idx_log_campaign")
  @@index([sent_at], map: "idx_log_sent")
  @@index([user_id], map: "idx_log_user")
}

model drip_campaign_progress {
  id           Int                            @id @default(autoincrement())
  campaign_id  Int
  user_id      Int
  current_step Int?                           @default(0)
  status       drip_campaign_progress_status? @default(active)
  next_send_at DateTime?                      @db.Timestamp(0)
  enrolled_at  DateTime                       @default(now()) @db.Timestamp(0)
  completed_at DateTime?                      @db.Timestamp(0)

  @@unique([campaign_id, user_id], map: "unique_campaign_user")
  @@index([next_send_at, status], map: "idx_next_send")
  @@index([user_id], map: "user_id")
}

model drip_campaign_queue {
  id           Int                         @id @default(autoincrement())
  campaign_id  Int
  step_id      Int
  user_id      Int
  scheduled_at DateTime                    @default(now()) @db.Timestamp(0)
  sent_at      DateTime?                   @db.Timestamp(0)
  status       drip_campaign_queue_status? @default(pending)
  created_at   DateTime                    @default(now()) @db.Timestamp(0)

  @@index([scheduled_at, status], map: "idx_scheduled")
}

model drip_campaign_steps {
  id              Int                               @id @default(autoincrement())
  campaign_id     Int
  step_order      Int
  delay_minutes   Int?                              @default(0)
  message_type    drip_campaign_steps_message_type? @default(text)
  message_content String                            @db.Text
  is_active       Boolean?                          @default(true)
  created_at      DateTime                          @default(now()) @db.Timestamp(0)

  @@index([campaign_id, step_order], map: "idx_campaign_step")
}

model drip_campaigns {
  id              Int                          @id @default(autoincrement())
  line_account_id Int?
  name            String                       @db.VarChar(255)
  description     String?                      @db.Text
  trigger_type    drip_campaigns_trigger_type? @default(follow)
  trigger_tag_id  Int?
  is_active       Boolean?                     @default(true)
  total_enrolled  Int?                         @default(0)
  total_completed Int?                         @default(0)
  created_at      DateTime                     @default(now()) @db.Timestamp(0)
  updated_at      DateTime                     @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_drip_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model drug_disposal_records {
  id              Int                          @id @default(autoincrement())
  line_account_id Int
  product_id      Int
  batch_number    String?                      @db.VarChar(100)
  quantity        Int
  reason          drug_disposal_records_reason
  disposal_method String?                      @db.VarChar(255)
  disposed_by     Int
  witness_by      Int?
  disposal_date   DateTime                     @db.Date
  notes           String?                      @db.Text
  photo_evidence  String?                      @db.Text
  created_at      DateTime?                    @default(now()) @db.Timestamp(0)

  @@index([disposal_date], map: "idx_disposal_date")
  @@index([line_account_id], map: "idx_line_account")
  @@index([product_id], map: "idx_product")
}

model drug_interaction_acknowledgments {
  id              Int                                        @id @default(autoincrement())
  user_id         Int
  line_user_id    String?                                    @db.VarChar(50)
  drug1_id        Int
  drug2_id        Int
  drug1_name      String?                                    @db.VarChar(255)
  drug2_name      String?                                    @db.VarChar(255)
  severity        drug_interaction_acknowledgments_severity? @default(moderate)
  acknowledged_at DateTime                                   @default(now()) @db.Timestamp(0)
  order_id        Int?

  @@index([drug1_id, drug2_id], map: "idx_drugs")
  @@index([user_id], map: "idx_user")
}

model drug_interactions {
  id             Int                         @id @default(autoincrement())
  drug1_name     String                      @db.VarChar(100)
  drug1_generic  String?                     @db.VarChar(100)
  drug2_name     String                      @db.VarChar(100)
  drug2_generic  String?                     @db.VarChar(100)
  severity       drug_interactions_severity? @default(moderate)
  description    String?                     @db.Text
  recommendation String?                     @db.Text
  created_at     DateTime                    @default(now()) @db.Timestamp(0)

  @@index([drug1_name], map: "idx_drug1")
  @@index([drug2_name], map: "idx_drug2")
  @@index([severity], map: "idx_severity")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model drug_pricing_rules {
  id             Int                                @id @default(autoincrement())
  rule_name      String                             @db.VarChar(100)
  rule_type      drug_pricing_rules_rule_type       @default(margin)
  category_id    Int?
  brand_name     String?                            @db.VarChar(255)
  min_margin     Decimal?                           @default(15.00) @db.Decimal(5, 2)
  max_margin     Decimal?                           @default(40.00) @db.Decimal(5, 2)
  target_margin  Decimal?                           @default(25.00) @db.Decimal(5, 2)
  price_rounding drug_pricing_rules_price_rounding? @default(nearest_5)
  conditions     String?                            @db.LongText
  priority       Int?                               @default(0)
  is_active      Boolean?                           @default(true)
  created_at     DateTime?                          @default(now()) @db.DateTime(0)
  updated_at     DateTime?                          @default(now()) @db.DateTime(0)

  @@index([is_active], map: "idx_active")
  @@index([category_id], map: "idx_category")
  @@index([priority], map: "idx_priority")
  @@index([rule_type], map: "idx_type")
}

model drug_recognition_cache {
  id                 Int       @id @default(autoincrement())
  image_hash         String    @unique(map: "image_hash") @db.VarChar(64)
  image_url          String?   @db.Text
  drug_name          String?   @db.VarChar(255)
  generic_name       String?   @db.VarChar(255)
  matched_product_id Int?
  recognition_result String?   @db.LongText
  created_at         DateTime? @default(now()) @db.DateTime(0)
  expires_at         DateTime? @db.DateTime(0)

  @@index([image_hash], map: "idx_hash")
  @@index([matched_product_id], map: "idx_product")
}

model email_settings {
  id          Int                         @id @default(autoincrement())
  smtp_host   String?                     @db.VarChar(255)
  smtp_port   Int?                        @default(587)
  smtp_user   String?                     @db.VarChar(255)
  smtp_pass   String?                     @db.VarChar(255)
  smtp_secure email_settings_smtp_secure? @default(tls)
  from_email  String?                     @db.VarChar(255)
  from_name   String?                     @default("Notification") @db.VarChar(255)
  created_at  DateTime                    @default(now()) @db.Timestamp(0)
  updated_at  DateTime                    @default(now()) @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model emergency_alerts {
  id              Int                        @id @default(autoincrement())
  user_id         Int?
  line_account_id Int?
  message         String?                    @db.Text
  red_flags       String?                    @db.LongText
  severity        emergency_alerts_severity? @default(warning)
  emergency_info  String?                    @db.LongText
  status          emergency_alerts_status?   @default(pending)
  reviewed_by     Int?
  reviewed_at     DateTime?                  @db.Timestamp(0)
  notes           String?                    @db.Text
  created_at      DateTime                   @default(now()) @db.Timestamp(0)
  updated_at      DateTime                   @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_created_at")
  @@index([line_account_id], map: "idx_line_account")
  @@index([severity], map: "idx_severity")
  @@index([status], map: "idx_status")
  @@index([user_id], map: "idx_user_id")
}

model expense_categories {
  id              Int                              @id @default(autoincrement())
  line_account_id Int?
  name            String                           @db.VarChar(100)
  name_en         String?                          @db.VarChar(100)
  description     String?                          @db.Text
  expense_type    expense_categories_expense_type? @default(operating)
  is_default      Boolean?                         @default(false)
  is_active       Boolean?                         @default(true)
  created_at      DateTime                         @default(now()) @db.Timestamp(0)

  @@index([is_active], map: "idx_exp_cat_active")
  @@index([line_account_id], map: "idx_exp_cat_line_account")
}

model expenses {
  id                 Int                      @id @default(autoincrement())
  line_account_id    Int?
  expense_number     String                   @unique(map: "expense_number") @db.VarChar(50)
  category_id        Int
  amount             Decimal                  @db.Decimal(12, 2)
  expense_date       DateTime                 @db.Date
  due_date           DateTime?                @db.Date
  description        String?                  @db.Text
  vendor_name        String?                  @db.VarChar(255)
  reference_number   String?                  @db.VarChar(100)
  attachment_path    String?                  @db.VarChar(500)
  payment_status     expenses_payment_status? @default(unpaid)
  payment_voucher_id Int?
  notes              String?                  @db.Text
  metadata           String?                  @db.LongText
  created_by         Int?
  created_at         DateTime                 @default(now()) @db.Timestamp(0)
  updated_at         DateTime                 @default(now()) @db.Timestamp(0)

  @@index([category_id], map: "idx_exp_category")
  @@index([expense_date], map: "idx_exp_date")
  @@index([line_account_id], map: "idx_exp_line_account")
  @@index([payment_status], map: "idx_exp_status")
}

model flex_templates {
  id              Int      @id @default(autoincrement())
  line_account_id Int?
  name            String   @db.VarChar(255)
  category        String?  @db.VarChar(100)
  description     String?  @db.Text
  flex_json       String   @db.LongText
  thumbnail_url   String?  @db.VarChar(500)
  is_public       Boolean? @default(false)
  use_count       Int?     @default(0)
  created_by      Int?
  created_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_flex_line_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model ghost_draft_learning {
  id                     Int       @id @default(autoincrement())
  line_account_id        Int?
  user_id                Int
  pharmacist_id          Int?
  customer_message       String    @db.Text
  ai_draft               String    @db.Text
  pharmacist_final       String    @db.Text
  edit_distance          Int?
  edit_ratio             Decimal?  @db.Decimal(5, 4)
  was_accepted           Boolean?  @default(false)
  context_stage          String?   @db.VarChar(50)
  context_symptoms       String?   @db.LongText
  context_drugs          String?   @db.LongText
  context_health_profile String?   @db.LongText
  feedback_rating        Int?      @db.TinyInt
  feedback_notes         String?   @db.Text
  created_at             DateTime? @default(now()) @db.DateTime(0)

  @@index([was_accepted], map: "idx_accepted")
  @@index([created_at], map: "idx_created")
  @@index([line_account_id], map: "idx_line_account")
  @@index([pharmacist_id], map: "idx_pharmacist")
  @@index([context_stage], map: "idx_stage")
  @@index([user_id], map: "idx_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model goods_receive_items {
  id               Int       @id @default(autoincrement())
  gr_id            Int
  po_item_id       Int
  product_id       Int
  unit_id          Int?
  unit_name        String?   @db.VarChar(50)
  unit_factor      Decimal?  @default(1.0000) @db.Decimal(10, 4)
  quantity         Int
  notes            String?   @db.Text
  batch_number     String?   @db.VarChar(50)
  lot_number       String?   @db.VarChar(50)
  expiry_date      DateTime? @db.Date
  manufacture_date DateTime? @db.Date
  unit_cost        Decimal   @default(0.00) @db.Decimal(12, 2)

  @@index([batch_number], map: "idx_gri_batch_number")
  @@index([expiry_date], map: "idx_gri_expiry_date")
  @@index([gr_id], map: "idx_gri_gr")
  @@index([po_item_id], map: "idx_gri_po_item")
  @@index([product_id], map: "idx_gri_product")
}

model goods_receives {
  id              Int                    @id @default(autoincrement())
  line_account_id Int?
  gr_number       String                 @unique(map: "gr_number") @db.VarChar(30)
  po_id           Int
  status          goods_receives_status? @default(draft)
  receive_date    DateTime               @db.Date
  notes           String?                @db.Text
  received_by     Int?
  confirmed_at    DateTime?              @db.Timestamp(0)
  created_at      DateTime               @default(now()) @db.Timestamp(0)
  updated_at      DateTime               @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_gr_line_account")
  @@index([gr_number], map: "idx_gr_number")
  @@index([po_id], map: "idx_gr_po")
  @@index([status], map: "idx_gr_status")
}

model groups {
  id              Int      @id @default(autoincrement())
  line_account_id Int?
  name            String   @db.VarChar(255)
  description     String?  @db.Text
  color           String?  @default("#3B82F6") @db.VarChar(7)
  created_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_group_line_account")
}

model health_article_categories {
  id              Int       @id @default(autoincrement())
  line_account_id Int?
  name            String    @db.VarChar(100)
  slug            String    @db.VarChar(100)
  description     String?   @db.Text
  icon            String?   @default("fas fa-folder") @db.VarChar(50)
  sort_order      Int?      @default(0)
  is_active       Boolean?  @default(true)
  created_at      DateTime? @default(now()) @db.Timestamp(0)
  updated_at      DateTime? @default(now()) @db.Timestamp(0)

  @@index([is_active, sort_order], map: "idx_category_active")
}

model health_articles {
  id               Int       @id @default(autoincrement())
  line_account_id  Int?
  category_id      Int?
  title            String    @db.VarChar(255)
  slug             String    @db.VarChar(255)
  excerpt          String?   @db.Text
  content          String    @db.LongText
  featured_image   String?   @db.VarChar(500)
  author_name      String?   @db.VarChar(100)
  author_title     String?   @db.VarChar(100)
  author_image     String?   @db.VarChar(500)
  tags             String?   @db.LongText
  meta_title       String?   @db.VarChar(255)
  meta_description String?   @db.VarChar(500)
  meta_keywords    String?   @db.VarChar(500)
  view_count       Int?      @default(0)
  is_featured      Boolean?  @default(false)
  is_published     Boolean?  @default(false)
  published_at     DateTime? @db.Timestamp(0)
  created_at       DateTime? @default(now()) @db.Timestamp(0)
  updated_at       DateTime? @default(now()) @db.Timestamp(0)

  @@index([category_id], map: "idx_article_category")
  @@index([is_featured, is_published], map: "idx_article_featured")
  @@index([is_published, published_at], map: "idx_article_published")
}

model inbox_admin_activity_log {
  id          String   @id
  admin_id    String
  action      String
  description String?
  ip_address  String?
  user_agent  String?
  metadata    String?
  created_at  DateTime @default(now())

  @@index([action])
  @@index([admin_id])
}

model AdminBotAccess {
  id               String   @id @default(cuid())
  adminId          Int      @map("admin_id")
  lineAccountId    Int      @map("line_account_id")
  canView          Boolean  @default(false) @map("can_view")
  canEdit          Boolean  @default(false) @map("can_edit")
  canBroadcast     Boolean  @default(false) @map("can_broadcast")
  canManageUsers   Boolean  @default(false) @map("can_manage_users")
  canManageShop    Boolean  @default(false) @map("can_manage_shop")
  canViewAnalytics Boolean  @default(false) @map("can_view_analytics")
  createdAt        DateTime @default(now()) @map("created_at")
  updatedAt        DateTime @updatedAt @map("updated_at")

  admin       AdminUser  @relation(fields: [adminId], references: [id], onDelete: Cascade)
  lineAccount LineAccount @relation(fields: [lineAccountId], references: [id], onDelete: Cascade)

  @@unique([adminId, lineAccountId])
  @@map("inbox_admin_bot_access")
}

model inbox_auth_accounts {
  id                String  @id
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?

  @@unique([provider, providerAccountId])
}

model inbox_auth_sessions {
  id           String   @id
  sessionToken String   @unique
  userId       String
  expires      DateTime
}

model inbox_auth_users {
  id            String    @id
  name          String?
  email         String    @unique
  emailVerified DateTime?
  image         String?
}

model inbox_auth_verification_tokens {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model LineAccount {
  id                 Int      @id @default(autoincrement())
  name               String
  channelId          String?  @map("channel_id")
  channelSecret      String   @unique @map("channel_secret")
  channelAccessToken String   @map("channel_access_token") @db.Text
  webhookUrl         String?  @map("webhook_url")
  basicId            String?  @map("basic_id")
  pictureUrl         String?  @map("picture_url")
  liffId             String?  @map("liff_id")
  isActive           Boolean  @default(true) @map("is_active")
  isDefault          Boolean  @default(false) @map("is_default")
  settings           Json?
  createdAt          DateTime @default(now()) @map("created_at")
  updatedAt          DateTime @updatedAt @map("updated_at")

  adminUsers AdminUser[]
  botAccess  AdminBotAccess[]
  lineUsers  LineUser[]
  messages   Message[]
  userTags   UserTag[]

  @@map("line_accounts")
}

model LineUser {
  id              Int       @id @default(autoincrement())
  lineAccountId   Int?      @map("line_account_id")
  lineUserId      String    @map("line_user_id")
  displayName     String?   @map("display_name")
  pictureUrl      String?   @map("picture_url")
  statusMessage   String?   @map("status_message")
  firstName       String?   @map("first_name")
  lastName        String?   @map("last_name")
  phone           String?
  email           String?
  birthDate       DateTime? @map("birth_date")
  gender          String?
  weight          Float?
  height          Float?
  address         String?
  district        String?
  province        String?
  postalCode      String?   @map("postal_code")
  memberId        String?   @map("member_id")
  isRegistered    Boolean   @default(false) @map("is_registered")
  registeredAt    DateTime? @map("registered_at")
  isBlocked       Boolean   @default(false) @map("is_blocked")
  membershipLevel String    @default("bronze") @map("membership_level")
  tier            String    @default("silver")
  points          Int       @default(0)
  totalPoints     Int       @default(0) @map("total_points")
  availablePoints Int       @default(0) @map("available_points")
  usedPoints      Int       @default(0) @map("used_points")
  loyaltyPoints   Int       @default(0) @map("loyalty_points")
  totalSpent      Float     @default(0) @map("total_spent")
  orderCount      Int       @default(0) @map("order_count")
  lastInteraction DateTime? @map("last_interaction")
  chatStatus      String?   @map("chat_status")
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")

  lineAccount             LineAccount?             @relation(fields: [lineAccountId], references: [id])
  messages                Message[]
  conversationAssignments ConversationAssignment[]
  conversationAssignees   ConversationAssignee[]
  tagAssignments          UserTagAssignment[]
  notes                   CustomerNote[]

  @@unique([lineAccountId, lineUserId])
  @@index([chatStatus])
  @@index([lastInteraction])
  @@index([lineAccountId])
  @@index([lineUserId])
  @@map("users")
}

model Message {
  id            Int      @id @default(autoincrement())
  lineAccountId Int?     @map("line_account_id")
  userId        Int      @map("user_id")
  direction     String
  messageType   String   @map("message_type")
  content       String?  @db.Text
  mediaUrl      String?  @map("media_url") @db.Text
  metadata      String?  @db.LongText
  replyToken    String?  @map("reply_token")
  isRead        Boolean  @default(false) @map("is_read")
  sentBy        String?  @map("sent_by")
  replyToId     Int?     @map("reply_to_id")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  lineAccount LineAccount? @relation(fields: [lineAccountId], references: [id])
  user        LineUser     @relation(fields: [userId], references: [id], onDelete: Cascade)
  replyTo     Message?     @relation("MessageReplies", fields: [replyToId], references: [id], onDelete: Restrict, onUpdate: Restrict)
  replies     Message[]    @relation("MessageReplies")

  @@index([createdAt])
  @@index([direction, isRead])
  @@index([lineAccountId])
  @@index([userId])
  @@map("messages")
}

model UserTagAssignment {
  id             Int       @id @default(autoincrement())
  userId         Int       @map("user_id")
  tagId          Int       @map("tag_id")
  assignedBy     String?   @default("manual") @map("assigned_by") @db.VarChar(50)
  assignedReason String?   @map("assigned_reason") @db.Text
  score          Int?      @default(0)
  createdAt      DateTime  @default(now()) @map("created_at") @db.Timestamp(0)
  expiresAt      DateTime? @map("expires_at") @db.Timestamp(0)

  user LineUser @relation(fields: [userId], references: [id], onDelete: Cascade)
  tag  UserTag  @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([userId, tagId], map: "unique_user_tag")
  @@index([tagId], map: "idx_tag")
  @@map("user_tag_assignments")
}

model CustomerNote {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  adminId   Int      @map("created_by")
  content   String   @map("content") @db.Text
  isPinned  Boolean  @default(false) @map("is_pinned")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  user  LineUser    @relation(fields: [userId], references: [id], onDelete: Cascade)
  admin AdminUser @relation(fields: [adminId], references: [id], onDelete: Cascade)

  @@index([userId], map: "idx_user")
  @@index([adminId], map: "idx_admin")
  @@map("customer_notes")
}

model UserTag {
  id              Int                    @id @default(autoincrement())
  lineAccountId   Int?                   @map("line_account_id")
  name            String                 @db.VarChar(100)
  color           String?                @default("#3B82F6") @db.VarChar(7)
  description     String?                @db.Text
  tagType         user_tags_tag_type?    @default(manual) @map("tag_type")
  autoAssignRules String?                @map("auto_assign_rules") @db.LongText
  autoRemoveRules String?                @map("auto_remove_rules") @db.LongText
  sourceType      user_tags_source_type? @default(manual) @map("source_type")
  sourceId        Int?                   @map("source_id")
  priority        Int?                   @default(0)
  createdAt       DateTime               @default(now()) @map("created_at") @db.Timestamp(0)

  lineAccount LineAccount?        @relation(fields: [lineAccountId], references: [id])
  assignments UserTagAssignment[]
  autoTagRules AutoTagRule[]

  @@unique([lineAccountId, name], map: "unique_tag_name")
  @@index([lineAccountId], map: "idx_account_tag")
  @@map("user_tags")
}

model inventory_batches {
  id                 Int                       @id @default(autoincrement())
  line_account_id    Int?                      @default(1)
  product_id         Int
  batch_number       String                    @db.VarChar(50)
  lot_number         String?                   @db.VarChar(50)
  supplier_id        Int?
  quantity           Int                       @default(0)
  quantity_available Int                       @default(0)
  cost_price         Decimal?                  @db.Decimal(10, 2)
  manufacture_date   DateTime?                 @db.Date
  expiry_date        DateTime?                 @db.Date
  received_at        DateTime                  @db.DateTime(0)
  received_by        Int?
  location_id        Int?
  status             inventory_batches_status? @default(active)
  disposal_date      DateTime?                 @db.DateTime(0)
  disposal_by        Int?
  disposal_reason    String?                   @db.Text
  notes              String?                   @db.Text
  created_at         DateTime                  @default(now()) @db.Timestamp(0)
  updated_at         DateTime                  @default(now()) @db.Timestamp(0)

  @@index([batch_number], map: "idx_batch_number")
  @@index([expiry_date], map: "idx_expiry")
  @@index([line_account_id], map: "idx_line_account")
  @@index([location_id], map: "idx_location")
  @@index([product_id], map: "idx_product")
  @@index([received_at], map: "idx_received_at")
  @@index([status], map: "idx_status")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model item_categories {
  id                Int      @id @default(autoincrement())
  line_account_id   Int?
  parent_id         Int?
  name              String   @db.VarChar(255)
  manufacturer_code String?  @db.VarChar(100)
  name_en           String?  @db.VarChar(255)
  description       String?  @db.Text
  image_url         String?  @db.VarChar(500)
  cny_code          String?  @db.VarChar(50)
  sort_order        Int?     @default(0)
  is_active         Boolean? @default(true)
  created_at        DateTime @default(now()) @db.Timestamp(0)

  @@index([cny_code], map: "idx_cat_cny_code")
  @@index([line_account_id], map: "idx_cat_line_account")
  @@index([parent_id], map: "idx_cat_parent")
}

model item_images {
  id         Int    @id @default(autoincrement())
  item_id    Int
  image_url  String @db.VarChar(500)
  sort_order Int?   @default(0)

  @@index([item_id], map: "idx_item")
}

model landing_banners {
  id              Int                        @id @default(autoincrement())
  line_account_id Int?
  title           String?                    @db.VarChar(255)
  image_url       String                     @db.VarChar(500)
  link_url        String?                    @db.VarChar(500)
  link_type       landing_banners_link_type? @default(none)
  sort_order      Int?                       @default(0)
  is_active       Boolean?                   @default(true)
  created_at      DateTime?                  @default(now()) @db.Timestamp(0)
  updated_at      DateTime?                  @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_banner_account")
  @@index([is_active, sort_order], map: "idx_banner_active")
}

model landing_faqs {
  id              Int       @id @default(autoincrement())
  line_account_id Int?
  question        String    @db.VarChar(500)
  answer          String    @db.Text
  sort_order      Int?      @default(0)
  is_active       Boolean?  @default(true)
  created_at      DateTime? @default(now()) @db.Timestamp(0)
  updated_at      DateTime? @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_faq_account")
  @@index([is_active, sort_order], map: "idx_faq_active")
}

model landing_featured_products {
  id              Int       @id @default(autoincrement())
  line_account_id Int?
  product_id      Int
  product_source  String?   @default("products") @db.VarChar(50)
  sort_order      Int?      @default(0)
  is_active       Boolean?  @default(true)
  created_at      DateTime? @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, product_id], map: "uk_featured_product")
  @@index([line_account_id], map: "idx_featured_account")
  @@index([is_active, sort_order], map: "idx_featured_active")
  @@index([product_id], map: "idx_featured_product")
}

model landing_settings {
  id              Int       @id @default(autoincrement())
  line_account_id Int?
  setting_key     String    @db.VarChar(100)
  setting_value   String?   @db.Text
  created_at      DateTime? @default(now()) @db.Timestamp(0)
  updated_at      DateTime? @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, setting_key], map: "uk_landing_setting")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model landing_testimonials {
  id              Int                          @id @default(autoincrement())
  line_account_id Int?
  customer_name   String                       @db.VarChar(100)
  customer_avatar String?                      @db.VarChar(255)
  rating          Int?                         @default(5) @db.TinyInt
  review_text     String                       @db.Text
  status          landing_testimonials_status? @default(pending)
  source          String?                      @db.VarChar(50)
  created_at      DateTime?                    @default(now()) @db.Timestamp(0)
  approved_at     DateTime?                    @db.Timestamp(0)

  @@index([line_account_id], map: "idx_testimonial_account")
  @@index([status, created_at], map: "idx_testimonial_status")
}

model liff_apps {
  id              Int                  @id @default(autoincrement())
  line_account_id Int?
  liff_id         String               @db.VarChar(100)
  name            String               @db.VarChar(100)
  description     String?              @db.Text
  endpoint_url    String?              @db.VarChar(500)
  view_type       liff_apps_view_type? @default(full)
  is_active       Boolean?             @default(true)
  created_at      DateTime             @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_liff_line_account")
}

model liff_message_logs {
  id              Int                         @id @default(autoincrement())
  line_user_id    String                      @db.VarChar(50)
  line_account_id Int?
  action_type     String                      @db.VarChar(50)
  message_data    String?                     @db.LongText
  sent_via        liff_message_logs_sent_via? @default(liff)
  status          liff_message_logs_status?   @default(sent)
  error_message   String?                     @db.Text
  created_at      DateTime                    @default(now()) @db.Timestamp(0)

  @@index([action_type], map: "idx_action")
  @@index([created_at], map: "idx_created")
  @@index([line_user_id], map: "idx_user")
}

model liff_shop_settings {
  id              Int      @id @default(autoincrement())
  line_account_id Int?
  setting_key     String   @db.VarChar(100)
  setting_value   String?  @db.Text
  created_at      DateTime @default(now()) @db.Timestamp(0)
  updated_at      DateTime @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, setting_key], map: "unique_setting")
}

model line_group_members {
  id              Int       @id @default(autoincrement())
  group_id        Int
  line_user_id    String    @db.VarChar(50)
  user_id         Int?
  display_name    String?   @db.VarChar(255)
  picture_url     String?   @db.Text
  is_active       Boolean?  @default(true)
  joined_at       DateTime  @default(now()) @db.Timestamp(0)
  left_at         DateTime? @db.Timestamp(0)
  total_messages  Int?      @default(0)
  last_message_at DateTime? @db.Timestamp(0)
  created_at      DateTime  @default(now()) @db.Timestamp(0)
  updated_at      DateTime  @default(now()) @db.Timestamp(0)

  @@unique([group_id, line_user_id], map: "unique_group_member")
  @@index([is_active], map: "idx_members_active")
  @@index([group_id], map: "idx_members_group")
  @@index([line_user_id], map: "idx_members_user")
}

model line_group_messages {
  id           Int      @id @default(autoincrement())
  group_id     Int
  line_user_id String?  @db.VarChar(50)
  message_type String?  @default("text") @db.VarChar(50)
  content      String?  @db.Text
  message_id   String?  @db.VarChar(50)
  created_at   DateTime @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_gmsg_created")
  @@index([group_id], map: "idx_gmsg_group")
  @@index([line_user_id], map: "idx_gmsg_user")
}

model line_groups {
  id               Int                     @id @default(autoincrement())
  line_account_id  Int
  group_id         String                  @db.VarChar(50)
  group_type       line_groups_group_type? @default(group)
  group_name       String?                 @db.VarChar(255)
  picture_url      String?                 @db.Text
  member_count     Int?                    @default(0)
  invited_by       String?                 @db.VarChar(50)
  invited_by_name  String?                 @db.VarChar(255)
  is_active        Boolean?                @default(true)
  joined_at        DateTime                @default(now()) @db.Timestamp(0)
  left_at          DateTime?               @db.Timestamp(0)
  last_activity_at DateTime?               @db.Timestamp(0)
  total_messages   Int?                    @default(0)
  settings         String?                 @db.LongText
  created_at       DateTime                @default(now()) @db.Timestamp(0)
  updated_at       DateTime                @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, group_id], map: "unique_account_group")
  @@index([line_account_id], map: "idx_groups_account")
  @@index([is_active], map: "idx_groups_active")
  @@index([group_type], map: "idx_groups_type")
}

model link_clicks {
  id           Int      @id @default(autoincrement())
  link_id      Int
  user_id      Int?
  line_user_id String?  @db.VarChar(50)
  ip_address   String?  @db.VarChar(45)
  user_agent   String?  @db.Text
  referer      String?  @db.Text
  clicked_at   DateTime @default(now()) @db.Timestamp(0)

  @@index([link_id], map: "idx_link")
  @@index([user_id], map: "idx_user")
}

model location_movements {
  id               Int                              @id @default(autoincrement())
  line_account_id  Int?                             @default(1)
  product_id       Int
  batch_id         Int?
  from_location_id Int?
  to_location_id   Int?
  quantity         Int
  movement_type    location_movements_movement_type
  reference_type   String?                          @db.VarChar(50)
  reference_id     Int?
  staff_id         Int?
  notes            String?                          @db.Text
  created_at       DateTime                         @default(now()) @db.Timestamp(0)

  @@index([batch_id], map: "idx_batch")
  @@index([created_at], map: "idx_created")
  @@index([from_location_id], map: "idx_from_location")
  @@index([line_account_id], map: "idx_line_account")
  @@index([movement_type], map: "idx_movement_type")
  @@index([product_id], map: "idx_product")
  @@index([to_location_id], map: "idx_to_location")
}

model loyalty_points {
  id              Int      @id @default(autoincrement())
  user_id         Int      @unique(map: "unique_user")
  line_account_id Int?
  points          Int?     @default(0)
  lifetime_points Int?     @default(0)
  tier            String?  @default("bronze") @db.VarChar(50)
  created_at      DateTime @default(now()) @db.Timestamp(0)
  updated_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_line_account")
}

model loyalty_points_history {
  id           Int                          @id @default(autoincrement())
  user_id      String                       @db.VarChar(100)
  account_id   Int?
  points       Int
  type         loyalty_points_history_type? @default(earn)
  description  String?                      @db.VarChar(255)
  reference_id Int?
  created_at   DateTime                     @default(now()) @db.Timestamp(0)
}

model medical_history {
  id                     Int       @id @default(autoincrement())
  user_id                Int
  triage_session_id      Int?
  symptoms               String?   @db.LongText
  diagnosis              String?   @db.Text
  medications_prescribed String?   @db.LongText
  pharmacist_notes       String?   @db.Text
  follow_up_date         DateTime? @db.Date
  created_at             DateTime  @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_created")
  @@index([user_id], map: "idx_user")
  @@index([triage_session_id], map: "triage_session_id")
}

model medication_reminders {
  id              Int       @id @default(autoincrement())
  user_id         Int
  line_user_id    String?   @db.VarChar(50)
  line_account_id Int?
  medication_name String    @db.VarChar(255)
  dosage          String?   @db.VarChar(100)
  frequency       String?   @db.VarChar(50)
  reminder_times  String?   @db.LongText
  start_date      DateTime? @db.Date
  end_date        DateTime? @db.Date
  notes           String?   @db.Text
  is_active       Boolean?  @default(true)
  product_id      Int?
  order_id        Int?
  created_at      DateTime  @default(now()) @db.Timestamp(0)
  updated_at      DateTime  @default(now()) @db.Timestamp(0)

  @@index([is_active], map: "idx_active")
  @@index([line_user_id], map: "idx_line_user")
  @@index([user_id], map: "idx_user")
}

model medication_taken_history {
  id             Int                              @id @default(autoincrement())
  reminder_id    Int
  user_id        Int
  scheduled_time DateTime?                        @db.Time(0)
  taken_at       DateTime                         @default(now()) @db.Timestamp(0)
  status         medication_taken_history_status? @default(taken)
  notes          String?                          @db.Text

  @@index([taken_at], map: "idx_date")
  @@index([reminder_id], map: "idx_reminder")
  @@index([user_id], map: "idx_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model message_analytics {
  id                    Int       @id @default(autoincrement())
  message_id            Int
  user_id               Int
  admin_id              Int?
  response_time_seconds Int?
  created_at            DateTime? @default(now()) @db.DateTime(0)

  @@index([created_at], map: "idx_created")
  @@index([message_id], map: "idx_message")
  @@index([user_id], map: "idx_user")
}

model mims_conversation_state {
  id         Int      @id @default(autoincrement())
  user_id    Int
  state_data String?  @db.LongText
  created_at DateTime @default(now()) @db.Timestamp(0)
  updated_at DateTime @default(now()) @db.Timestamp(0)

  @@index([user_id], map: "idx_user_id")
}

model notification_settings {
  id                        Int      @id @default(autoincrement())
  line_account_id           Int      @unique(map: "unique_account") @default(0)
  line_notify_enabled       Boolean? @default(true)
  line_notify_new_order     Boolean? @default(true)
  line_notify_payment       Boolean? @default(true)
  line_notify_urgent        Boolean? @default(true)
  line_notify_appointment   Boolean? @default(true)
  line_notify_low_stock     Boolean? @default(false)
  email_enabled             Boolean? @default(false)
  email_addresses           String?  @db.Text
  email_notify_urgent       Boolean? @default(true)
  email_notify_daily_report Boolean? @default(false)
  email_notify_low_stock    Boolean? @default(false)
  telegram_enabled          Boolean? @default(false)
  notify_admin_users        String?  @db.Text
  created_at                DateTime @default(now()) @db.Timestamp(0)
  updated_at                DateTime @default(now()) @db.Timestamp(0)
}

model onboarding_sessions {
  id                   Int      @id @default(autoincrement())
  line_account_id      Int
  admin_user_id        Int
  conversation_history String?  @db.LongText
  current_topic        String?  @db.VarChar(100)
  business_type        String?  @db.VarChar(50)
  setup_progress       String?  @db.LongText
  last_activity        DateTime @default(now()) @db.Timestamp(0)
  created_at           DateTime @default(now()) @db.Timestamp(0)

  @@index([admin_user_id], map: "idx_admin_user")
  @@index([last_activity], map: "idx_last_activity")
  @@index([line_account_id], map: "idx_line_account")
}

model order_items {
  id            Int     @id @default(autoincrement())
  order_id      Int
  product_id    Int?
  product_name  String  @db.VarChar(255)
  product_price Decimal @db.Decimal(10, 2)
  quantity      Int
  subtotal      Decimal @db.Decimal(10, 2)

  @@index([order_id], map: "order_id")
  @@index([product_id], map: "product_id")
}

model orders {
  id                Int                    @id @default(autoincrement())
  line_account_id   Int?
  order_number      String                 @unique(map: "order_number") @db.VarChar(50)
  user_id           Int
  total_amount      Decimal                @db.Decimal(10, 2)
  shipping_fee      Decimal?               @default(0.00) @db.Decimal(10, 2)
  discount_amount   Decimal?               @default(0.00) @db.Decimal(10, 2)
  grand_total       Decimal                @db.Decimal(10, 2)
  status            orders_status?         @default(pending)
  payment_method    String?                @db.VarChar(50)
  payment_status    orders_payment_status? @default(pending)
  shipping_name     String?                @db.VarChar(255)
  shipping_phone    String?                @db.VarChar(20)
  shipping_address  String?                @db.Text
  shipping_tracking String?                @db.VarChar(100)
  note              String?                @db.Text
  created_at        DateTime               @default(now()) @db.Timestamp(0)
  updated_at        DateTime               @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_order_line_account")
  @@index([status], map: "idx_order_status")
  @@index([user_id], map: "user_id")
}

model payment_proofs {
  id             Int                    @id @default(autoincrement())
  transaction_id Int
  image_url      String                 @db.VarChar(500)
  amount         Decimal?               @db.Decimal(10, 2)
  status         payment_proofs_status? @default(pending)
  admin_note     String?                @db.Text
  created_at     DateTime               @default(now()) @db.Timestamp(0)

  @@index([transaction_id], map: "idx_transaction")
}

model payment_slips {
  id             Int                   @id @default(autoincrement())
  order_id       Int
  transaction_id Int?
  line_user_id   String?               @db.VarChar(50)
  user_id        Int?
  image_url      String                @db.VarChar(500)
  amount         Decimal?              @db.Decimal(10, 2)
  status         payment_slips_status? @default(pending)
  admin_note     String?               @db.Text
  created_at     DateTime              @default(now()) @db.Timestamp(0)

  @@index([order_id], map: "idx_order_id")
  @@index([transaction_id], map: "idx_transaction")
  @@index([order_id], map: "order_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model payment_vouchers {
  id               Int                             @id @default(autoincrement())
  line_account_id  Int?
  voucher_number   String                          @unique(map: "voucher_number") @db.VarChar(50)
  voucher_type     payment_vouchers_voucher_type
  reference_id     Int
  payment_date     DateTime                        @db.Date
  amount           Decimal                         @db.Decimal(12, 2)
  payment_method   payment_vouchers_payment_method
  bank_account     String?                         @db.VarChar(100)
  reference_number String?                         @db.VarChar(100)
  cheque_number    String?                         @db.VarChar(50)
  cheque_date      DateTime?                       @db.Date
  attachment_path  String?                         @db.VarChar(500)
  notes            String?                         @db.Text
  metadata         String?                         @db.LongText
  created_by       Int?
  created_at       DateTime                        @default(now()) @db.Timestamp(0)

  @@index([payment_date], map: "idx_pv_date")
  @@index([line_account_id], map: "idx_pv_line_account")
  @@index([reference_id], map: "idx_pv_ref")
  @@index([voucher_type], map: "idx_pv_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model performance_metrics {
  id                Int                             @id @default(autoincrement())
  line_account_id   Int?
  metric_type       performance_metrics_metric_type
  duration_ms       Int
  operation_details String?                         @db.LongText
  user_agent        String?                         @db.VarChar(255)
  created_at        DateTime?                       @default(now()) @db.DateTime(0)

  @@index([line_account_id, metric_type], map: "idx_account_type")
  @@index([created_at], map: "idx_created")
  @@index([metric_type, created_at], map: "idx_type_created")
}

model pharmacist_consultations {
  id                  Int                                         @id @default(autoincrement())
  line_account_id     Int?
  user_id             Int
  pharmacist_id       Int?
  assessment_id       Int?
  consultation_type   pharmacist_consultations_consultation_type? @default(chat)
  status              pharmacist_consultations_status?            @default(waiting)
  notes               String?                                     @db.Text
  recommendations     String?                                     @db.LongText
  prescribed_products String?                                     @db.LongText
  follow_up_required  Boolean?                                    @default(false)
  started_at          DateTime?                                   @db.Timestamp(0)
  ended_at            DateTime?                                   @db.Timestamp(0)
  created_at          DateTime                                    @default(now()) @db.Timestamp(0)

  @@index([pharmacist_id], map: "idx_consult_pharmacist")
  @@index([user_id], map: "idx_consult_user")
}

model pharmacist_holidays {
  id            Int      @id @default(autoincrement())
  pharmacist_id Int
  holiday_date  DateTime @db.Date
  reason        String?  @db.VarChar(255)
  created_at    DateTime @default(now()) @db.Timestamp(0)

  @@unique([pharmacist_id, holiday_date], map: "unique_holiday")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model pharmacist_notifications {
  id                Int                                @id @default(autoincrement())
  user_id           Int
  line_account_id   Int?
  triage_session_id Int?
  priority          pharmacist_notifications_priority? @default(normal)
  notification_data String?                            @db.LongText
  status            pharmacist_notifications_status?   @default(pending)
  handled_by        Int?
  handled_at        DateTime?                          @db.Timestamp(0)
  created_at        DateTime                           @default(now()) @db.Timestamp(0)
  type              String?                            @default("triage_alert") @db.VarChar(50)
  title             String?                            @db.VarChar(255)
  message           String?                            @db.Text
  reference_id      Int?
  reference_type    String?                            @db.VarChar(50)

  @@index([line_account_id], map: "idx_line_account")
  @@index([status, priority], map: "idx_status_priority")
  @@index([triage_session_id], map: "triage_session_id")
  @@index([user_id], map: "user_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model pharmacist_schedules {
  id            Int      @id @default(autoincrement())
  pharmacist_id Int
  day_of_week   Int      @db.TinyInt
  start_time    DateTime @db.Time(0)
  end_time      DateTime @db.Time(0)
  is_available  Boolean? @default(true)
  created_at    DateTime @default(now()) @db.Timestamp(0)

  @@index([pharmacist_id, day_of_week], map: "idx_pharmacist_day")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model pharmacists {
  id                    Int       @id @default(autoincrement())
  line_account_id       Int?
  name                  String    @db.VarChar(255)
  title                 String?   @default("") @db.VarChar(50)
  specialty             String?   @default("เภสัชกร") @db.VarChar(255)
  sub_specialty         String?   @db.VarChar(255)
  hospital              String?   @db.VarChar(255)
  license_no            String?   @db.VarChar(100)
  bio                   String?   @db.Text
  consulting_areas      String?   @db.Text
  work_experience       String?   @db.Text
  image_url             String?   @db.VarChar(500)
  rating                Decimal?  @default(5.0) @db.Decimal(2, 1)
  review_count          Int?      @default(0)
  consultation_fee      Decimal?  @default(0.00) @db.Decimal(10, 2)
  consultation_duration Int?      @default(15)
  is_available          Boolean?  @default(true)
  is_active             Boolean?  @default(true)
  created_at            DateTime  @default(now()) @db.Timestamp(0)
  updated_at            DateTime  @default(now()) @db.Timestamp(0)
  license_number        String?   @unique(map: "license_number") @db.VarChar(50)
  license_expiry        DateTime? @db.Date
  pharmacy_council_id   String?   @db.VarChar(50)
  cpe_credits           Int?      @default(0)

  @@index([is_active], map: "idx_active")
  @@index([line_account_id], map: "idx_line_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model pharmacy_context_keywords {
  id           Int                                    @id @default(autoincrement())
  keyword      String                                 @db.VarChar(100)
  keyword_type pharmacy_context_keywords_keyword_type
  widget_type  pharmacy_context_keywords_widget_type
  related_data String?                                @db.LongText
  priority     Int?                                   @default(0)
  is_active    Boolean?                               @default(true)

  @@index([is_active], map: "idx_active")
  @@index([keyword], map: "idx_keyword")
  @@index([widget_type], map: "idx_widget")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model pharmacy_ghost_learning {
  id               Int       @id @default(autoincrement())
  user_id          Int
  customer_message String    @db.Text
  ai_draft         String    @db.Text
  pharmacist_final String    @db.Text
  edit_distance    Int?
  was_accepted     Boolean?  @default(false)
  context          String?   @db.LongText
  mentioned_drugs  String?   @db.LongText
  created_at       DateTime? @default(now()) @db.DateTime(0)

  @@index([was_accepted], map: "idx_accepted")
  @@index([user_id], map: "idx_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model point_rewards {
  id              Int                 @id @default(autoincrement())
  line_account_id Int?
  name            String              @db.VarChar(255)
  description     String?             @db.Text
  points_required Int                 @default(100)
  type            point_rewards_type? @default(discount)
  value           Decimal?            @default(0.00) @db.Decimal(10, 2)
  image_url       String?             @db.VarChar(500)
  stock           Int?
  redeemed_count  Int?                @default(0)
  is_active       Boolean?            @default(true)
  start_date      DateTime?           @db.Date
  end_date        DateTime?           @db.Date
  created_at      DateTime            @default(now()) @db.Timestamp(0)

  @@index([is_active], map: "idx_reward_active")
  @@index([points_required], map: "idx_reward_points")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model points_campaigns {
  id                    Int      @id @default(autoincrement())
  line_account_id       Int?
  name                  String   @db.VarChar(255)
  description           String?  @db.Text
  multiplier            Decimal? @default(2.00) @db.Decimal(3, 2)
  start_date            DateTime @db.DateTime(0)
  end_date              DateTime @db.DateTime(0)
  applicable_categories String?  @db.LongText
  is_active             Boolean? @default(true)
  created_at            DateTime @default(now()) @db.Timestamp(0)
  updated_at            DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_campaign_account")
  @@index([is_active], map: "idx_campaign_active")
  @@index([start_date, end_date], map: "idx_campaign_dates")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model points_history {
  id             Int                 @id @default(autoincrement())
  user_id        Int
  points         Int
  type           points_history_type
  reference_type String?             @db.VarChar(50)
  reference_id   Int?
  description    String?             @db.Text
  balance_after  Int?
  created_by     String?             @db.VarChar(100)
  created_at     DateTime            @default(now()) @db.Timestamp(0)

  @@index([type], map: "idx_points_type")
  @@index([user_id], map: "idx_points_user")
}

model points_rules {
  id              Int                    @id @default(autoincrement())
  line_account_id Int?
  rule_type       points_rules_rule_type
  name            String                 @db.VarChar(255)
  description     String?                @db.Text
  value           Decimal                @default(1.0000) @db.Decimal(10, 4)
  conditions      String?                @db.LongText
  start_date      DateTime?              @db.Date
  end_date        DateTime?              @db.Date
  is_active       Boolean?               @default(true)
  priority        Int?                   @default(0)
  created_at      DateTime               @default(now()) @db.Timestamp(0)
  updated_at      DateTime               @default(now()) @db.Timestamp(0)

  @@index([is_active], map: "idx_active")
  @@index([start_date, end_date], map: "idx_dates")
  @@index([rule_type], map: "idx_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model points_settings {
  id                   Int      @id @default(autoincrement())
  line_account_id      Int?     @unique(map: "unique_account")
  points_per_baht      Decimal? @default(0.001000) @db.Decimal(10, 6)
  min_order_for_points Decimal? @default(0.00) @db.Decimal(12, 2)
  points_expiry_days   Int?     @default(365)
  is_active            Boolean? @default(true)
  created_at           DateTime @default(now()) @db.Timestamp(0)
  updated_at           DateTime @default(now()) @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model points_tiers {
  id                Int      @id @default(autoincrement())
  line_account_id   Int?
  name              String   @db.VarChar(100)
  min_points        Int
  multiplier        Decimal? @default(1.00) @db.Decimal(3, 2)
  points_multiplier Decimal? @default(1.00) @db.Decimal(3, 2)
  color             String?  @default("#666666") @db.VarChar(20)
  icon              String?  @default("fa-star") @db.VarChar(50)
  sort_order        Int?     @default(0)
  benefits          String?  @db.Text
  badge_color       String?  @default("#6B7280") @db.VarChar(20)
  is_active         Boolean? @default(true)
  created_at        DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_account")
  @@index([min_points], map: "idx_points")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model points_transactions {
  id              Int                      @id @default(autoincrement())
  user_id         Int
  line_account_id Int?
  type            points_transactions_type
  points          Int
  balance_after   Int
  reference_type  String?                  @db.VarChar(50)
  reference_id    Int?
  description     String?                  @db.VarChar(255)
  expires_at      DateTime?                @db.Timestamp(0)
  created_at      DateTime                 @default(now()) @db.Timestamp(0)

  @@index([expires_at], map: "idx_expires")
  @@index([type], map: "idx_type")
  @@index([user_id], map: "idx_user")
}

model pos_cash_movements {
  id              Int                              @id @default(autoincrement())
  line_account_id Int
  shift_id        Int
  movement_type   pos_cash_movements_movement_type
  amount          Decimal                          @db.Decimal(12, 2)
  reason          String                           @db.VarChar(255)
  created_by      Int
  created_at      DateTime?                        @default(now()) @db.DateTime(0)

  @@index([shift_id], map: "idx_shift")
}

model pos_daily_summary {
  id                 Int       @id @default(autoincrement())
  line_account_id    Int?
  summary_date       DateTime  @db.Date
  total_sales        Decimal?  @default(0.00) @db.Decimal(12, 2)
  total_transactions Int?      @default(0)
  total_items_sold   Int?      @default(0)
  cash_sales         Decimal?  @default(0.00) @db.Decimal(12, 2)
  transfer_sales     Decimal?  @default(0.00) @db.Decimal(12, 2)
  card_sales         Decimal?  @default(0.00) @db.Decimal(12, 2)
  points_sales       Decimal?  @default(0.00) @db.Decimal(12, 2)
  credit_sales       Decimal?  @default(0.00) @db.Decimal(12, 2)
  total_returns      Decimal?  @default(0.00) @db.Decimal(12, 2)
  return_count       Int?      @default(0)
  total_vat          Decimal?  @default(0.00) @db.Decimal(12, 2)
  net_sales          Decimal?  @default(0.00) @db.Decimal(12, 2)
  created_at         DateTime? @default(now()) @db.DateTime(0)
  updated_at         DateTime? @default(now()) @db.DateTime(0)

  @@unique([summary_date, line_account_id], map: "idx_date_account")
  @@index([line_account_id], map: "idx_line_account")
}

model pos_payments {
  id               Int                         @id @default(autoincrement())
  transaction_id   Int
  payment_method   pos_payments_payment_method
  amount           Decimal                     @db.Decimal(12, 2)
  cash_received    Decimal?                    @db.Decimal(12, 2)
  change_amount    Decimal?                    @db.Decimal(12, 2)
  reference_number String?                     @db.VarChar(100)
  points_used      Int?
  created_at       DateTime?                   @default(now()) @db.DateTime(0)

  @@index([payment_method], map: "idx_method")
  @@index([transaction_id], map: "transaction_id")
}

model pos_return_items {
  id               Int     @id @default(autoincrement())
  return_id        Int
  original_item_id Int
  product_id       Int
  batch_id         Int?
  quantity         Int
  unit_price       Decimal @db.Decimal(12, 2)
  line_total       Decimal @db.Decimal(12, 2)

  @@index([product_id], map: "idx_product")
  @@index([original_item_id], map: "original_item_id")
  @@index([return_id], map: "return_id")
}

model pos_returns {
  id                      Int                       @id @default(autoincrement())
  line_account_id         Int?
  return_number           String                    @unique(map: "return_number") @db.VarChar(50)
  original_transaction_id Int
  shift_id                Int
  total_amount            Decimal                   @db.Decimal(12, 2)
  refund_amount           Decimal                   @db.Decimal(12, 2)
  refund_method           pos_returns_refund_method
  points_deducted         Int?                      @default(0)
  reason                  String                    @db.VarChar(255)
  processed_by            Int
  authorized_by           Int?
  status                  pos_returns_status?       @default(pending)
  created_at              DateTime?                 @default(now()) @db.DateTime(0)
  completed_at            DateTime?                 @db.DateTime(0)

  @@index([line_account_id], map: "idx_line_account")
  @@index([original_transaction_id], map: "idx_original")
  @@index([status], map: "idx_status")
}

model pos_shifts {
  id                 Int                @id @default(autoincrement())
  line_account_id    Int?
  cashier_id         Int
  shift_number       String             @unique(map: "shift_number") @db.VarChar(50)
  opening_cash       Decimal            @db.Decimal(12, 2)
  closing_cash       Decimal?           @db.Decimal(12, 2)
  expected_cash      Decimal?           @db.Decimal(12, 2)
  variance           Decimal?           @db.Decimal(12, 2)
  total_sales        Decimal?           @default(0.00) @db.Decimal(12, 2)
  total_transactions Int?               @default(0)
  total_refunds      Decimal?           @default(0.00) @db.Decimal(12, 2)
  status             pos_shifts_status? @default(open)
  opened_at          DateTime?          @default(now()) @db.DateTime(0)
  closed_at          DateTime?          @db.DateTime(0)
  cash_adjustments   Decimal?           @default(0.00) @db.Decimal(12, 2)

  @@index([cashier_id], map: "idx_cashier")
  @@index([line_account_id], map: "idx_line_account")
  @@index([status], map: "idx_status")
}

model pos_transaction_items {
  id                    Int                                  @id @default(autoincrement())
  transaction_id        Int
  product_id            Int
  batch_id              Int?
  product_name          String?                              @db.VarChar(255)
  product_sku           String?                              @db.VarChar(100)
  quantity              Int
  returned_quantity     Int?                                 @default(0)
  unit_price            Decimal                              @db.Decimal(12, 2)
  cost_price            Decimal?                             @db.Decimal(12, 2)
  discount_type         pos_transaction_items_discount_type?
  discount_value        Decimal?                             @default(0.00) @db.Decimal(12, 2)
  discount_amount       Decimal?                             @default(0.00) @db.Decimal(12, 2)
  line_total            Decimal                              @db.Decimal(12, 2)
  created_at            DateTime?                            @default(now()) @db.DateTime(0)
  original_price        Decimal?                             @db.Decimal(12, 2)
  price_override_reason String?                              @db.VarChar(255)
  price_override_by     Int?
  price_override_at     DateTime?                            @db.DateTime(0)

  @@index([batch_id], map: "idx_batch")
  @@index([product_id], map: "idx_product")
  @@index([transaction_id], map: "transaction_id")
}

model pos_transactions {
  id                 Int                             @id @default(autoincrement())
  line_account_id    Int?
  transaction_number String                          @unique(map: "transaction_number") @db.VarChar(50)
  shift_id           Int
  cashier_id         Int
  customer_id        Int?
  customer_type      pos_transactions_customer_type? @default(walk_in)
  subtotal           Decimal?                        @default(0.00) @db.Decimal(12, 2)
  discount_type      pos_transactions_discount_type?
  discount_value     Decimal?                        @default(0.00) @db.Decimal(12, 2)
  discount_amount    Decimal?                        @default(0.00) @db.Decimal(12, 2)
  vat_amount         Decimal?                        @default(0.00) @db.Decimal(12, 2)
  total_amount       Decimal?                        @default(0.00) @db.Decimal(12, 2)
  points_earned      Int?                            @default(0)
  points_redeemed    Int?                            @default(0)
  points_value       Decimal?                        @default(0.00) @db.Decimal(12, 2)
  status             pos_transactions_status?        @default(draft)
  voided_at          DateTime?                       @db.DateTime(0)
  voided_by          Int?
  void_reason        String?                         @db.VarChar(255)
  created_at         DateTime?                       @default(now()) @db.DateTime(0)
  completed_at       DateTime?                       @db.DateTime(0)
  hold_note          String?                         @db.VarChar(255)
  hold_at            DateTime?                       @db.DateTime(0)
  reprint_count      Int?                            @default(0)
  last_reprint_at    DateTime?                       @db.DateTime(0)
  last_reprint_by    Int?

  @@index([cashier_id], map: "idx_cashier")
  @@index([customer_id], map: "idx_customer")
  @@index([created_at], map: "idx_date")
  @@index([line_account_id], map: "idx_line_account")
  @@index([shift_id], map: "idx_shift")
  @@index([status], map: "idx_status")
}

model prescription_approvals {
  id              Int                            @id @default(autoincrement())
  user_id         Int
  pharmacist_id   Int?
  approved_items  String                         @db.LongText
  status          prescription_approvals_status? @default(pending)
  video_call_id   Int?
  notes           String?                        @db.Text
  line_account_id Int?
  created_at      DateTime?                      @default(now()) @db.DateTime(0)
  expires_at      DateTime                       @db.DateTime(0)
  used_at         DateTime?                      @db.DateTime(0)

  @@index([expires_at], map: "idx_expires_at")
  @@index([line_account_id], map: "idx_line_account_id")
  @@index([status], map: "idx_status")
  @@index([user_id], map: "idx_user_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model prescription_items {
  id                 Int       @id @default(autoincrement())
  prescription_id    Int
  product_id         Int
  drug_name          String    @db.VarChar(255)
  strength           String?   @db.VarChar(100)
  quantity           Int
  directions         String    @db.Text
  dispensed_quantity Int?      @default(0)
  created_at         DateTime? @default(now()) @db.Timestamp(0)

  @@index([prescription_id], map: "idx_prescription")
  @@index([product_id], map: "idx_product")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model prescription_ocr_results {
  id                Int       @id @default(autoincrement())
  user_id           Int
  image_hash        String    @db.VarChar(64)
  image_url         String?   @db.Text
  extracted_drugs   String?   @db.LongText
  doctor_name       String?   @db.VarChar(255)
  hospital_name     String?   @db.VarChar(255)
  prescription_date DateTime? @db.Date
  ocr_confidence    Decimal?  @db.Decimal(3, 2)
  created_at        DateTime? @default(now()) @db.DateTime(0)

  @@index([image_hash], map: "idx_hash")
  @@index([user_id], map: "idx_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model prescription_records {
  id                  Int                          @id @default(autoincrement())
  line_account_id     Int
  prescription_number String                       @unique(map: "prescription_number") @db.VarChar(100)
  patient_name        String                       @db.VarChar(255)
  patient_id_card     String?                      @db.VarChar(20)
  doctor_name         String                       @db.VarChar(255)
  doctor_license      String                       @db.VarChar(50)
  doctor_signature    String?                      @db.Text
  prescription_date   DateTime                     @db.Date
  prescription_image  String?                      @db.Text
  status              prescription_records_status? @default(pending)
  verified_by         Int?
  verified_at         DateTime?                    @db.DateTime(0)
  notes               String?                      @db.Text
  created_at          DateTime?                    @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_line_account")
  @@index([prescription_date], map: "idx_prescription_date")
  @@index([prescription_number], map: "idx_prescription_number")
  @@index([status], map: "idx_status")
}

model product_categories {
  id                Int      @id @default(autoincrement())
  line_account_id   Int?
  name              String?  @db.VarChar(255)
  manufacturer_code String?  @db.VarChar(100)
  cny_code          String?  @db.VarChar(100)
  description       String?  @db.Text
  image_url         String?  @db.VarChar(500)
  sort_order        Int?     @default(0)
  is_active         Boolean? @default(true)
  created_at        DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_cat_line_account")
  @@index([cny_code], map: "idx_cny_code")
}

model product_images {
  id         Int    @id @default(autoincrement())
  product_id Int
  image_url  String @db.VarChar(500)
  sort_order Int?   @default(0)

  @@index([product_id], map: "product_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model product_units {
  id               Int      @id @default(autoincrement())
  line_account_id  Int?
  product_id       Int
  unit_name        String   @db.VarChar(50)
  unit_code        String?  @db.VarChar(20)
  factor           Decimal  @default(1.0000) @db.Decimal(10, 4)
  cost_price       Decimal? @db.Decimal(10, 2)
  sale_price       Decimal? @db.Decimal(10, 2)
  barcode          String?  @db.VarChar(50)
  is_base_unit     Boolean? @default(false)
  is_purchase_unit Boolean? @default(true)
  is_sale_unit     Boolean? @default(true)
  is_active        Boolean? @default(true)
  created_at       DateTime @default(now()) @db.Timestamp(0)
  updated_at       DateTime @default(now()) @db.Timestamp(0)

  @@unique([product_id, unit_name], map: "unique_product_unit")
  @@index([barcode], map: "idx_barcode")
  @@index([line_account_id], map: "idx_line_account")
  @@index([product_id], map: "idx_product")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model products {
  id                    Int                       @id @default(autoincrement())
  line_account_id       Int?
  category_id           Int?
  name                  String?                   @db.VarChar(255)
  description           String?                   @db.Text
  price                 Decimal                   @db.Decimal(10, 2)
  sale_price            Decimal?                  @db.Decimal(10, 2)
  previous_price        Decimal?                  @db.Decimal(10, 2)
  price_changed_at      DateTime?                 @db.Timestamp(0)
  image_url             String?                   @db.VarChar(500)
  item_type             products_item_type?       @default(physical)
  delivery_method       products_delivery_method? @default(shipping)
  action_data           String?                   @db.LongText
  stock                 Int?                      @default(0)
  max_quantity          Int?
  sku                   String?                   @db.VarChar(100)
  is_active             Boolean?                  @default(true)
  is_featured           Boolean?                  @default(false)
  sort_order            Int?                      @default(0)
  validity_days         Int?
  old_business_item_id  Int?
  created_at            DateTime                  @default(now()) @db.Timestamp(0)
  updated_at            DateTime                  @default(now()) @db.Timestamp(0)
  barcode               String?                   @db.VarChar(100)
  manufacturer          String?                   @db.VarChar(255)
  generic_name          String?                   @db.VarChar(255)
  usage_instructions    String?                   @db.Text
  unit                  String?                   @default("ชิ้น") @db.VarChar(50)
  extra_data            String?                   @db.LongText
  is_bestseller         Boolean?                  @default(false)
  drug_type             products_drug_type?       @default(household)
  requires_prescription Boolean?                  @default(false)
  requires_pharmacist   Boolean?                  @default(false)
  drug_schedule         String?                   @db.VarChar(50)
  active_ingredient     String?                   @db.Text
  strength              String?                   @db.VarChar(100)
  dosage_form           String?                   @db.VarChar(100)
  fda_registration      String?                   @db.VarChar(100)

  @@index([category_id], map: "category_id")
  @@index([barcode], map: "idx_barcode")
  @@index([drug_type], map: "idx_drug_type")
  @@index([is_featured], map: "idx_is_featured")
  @@index([line_account_id], map: "idx_product_line_account")
  @@index([is_bestseller], map: "idx_products_bestseller")
  @@index([is_featured], map: "idx_products_featured")
  @@index([requires_pharmacist], map: "idx_requires_pharmacist")
  @@index([requires_prescription], map: "idx_requires_prescription")
  @@index([sku], map: "idx_sku")
  @@index([sort_order], map: "idx_sort_order")
}

model promotion_settings {
  id              Int      @id @default(autoincrement())
  line_account_id Int?
  setting_key     String   @db.VarChar(100)
  setting_value   String?  @db.Text
  created_at      DateTime @default(now()) @db.Timestamp(0)
  updated_at      DateTime @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, setting_key], map: "unique_setting")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model purchase_order_items {
  id                Int      @id @default(autoincrement())
  po_id             Int
  product_id        Int
  unit_id           Int?
  unit_name         String?  @db.VarChar(50)
  unit_factor       Decimal? @default(1.0000) @db.Decimal(10, 4)
  quantity          Int
  received_quantity Int?     @default(0)
  unit_cost         Decimal  @db.Decimal(10, 2)
  subtotal          Decimal  @db.Decimal(15, 2)
  notes             String?  @db.Text

  @@index([po_id], map: "idx_poi_po")
  @@index([product_id], map: "idx_poi_product")
}

model purchase_orders {
  id              Int                     @id @default(autoincrement())
  line_account_id Int?
  po_number       String                  @unique(map: "po_number") @db.VarChar(30)
  supplier_id     Int
  status          purchase_orders_status? @default(draft)
  order_date      DateTime                @db.Date
  expected_date   DateTime?               @db.Date
  subtotal        Decimal?                @default(0.00) @db.Decimal(15, 2)
  tax_amount      Decimal?                @default(0.00) @db.Decimal(15, 2)
  total_amount    Decimal?                @default(0.00) @db.Decimal(15, 2)
  notes           String?                 @db.Text
  cancel_reason   String?                 @db.Text
  created_by      Int?
  submitted_at    DateTime?               @db.Timestamp(0)
  cancelled_at    DateTime?               @db.Timestamp(0)
  created_at      DateTime                @default(now()) @db.Timestamp(0)
  updated_at      DateTime                @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_po_line_account")
  @@index([po_number], map: "idx_po_number")
  @@index([order_date], map: "idx_po_order_date")
  @@index([status], map: "idx_po_status")
  @@index([supplier_id], map: "idx_po_supplier")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model quick_reply_templates {
  id              Int       @id @default(autoincrement())
  line_account_id Int
  name            String    @db.VarChar(100)
  content         String    @db.Text
  category        String?   @default("") @db.VarChar(50)
  quick_reply     String?   @db.Text
  usage_count     Int?      @default(0)
  last_used_at    DateTime? @db.DateTime(0)
  created_by      Int?
  created_at      DateTime? @default(now()) @db.DateTime(0)
  updated_at      DateTime? @default(now()) @db.DateTime(0)

  @@index([line_account_id], map: "idx_account")
  @@index([category], map: "idx_category")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model receipt_vouchers {
  id               Int                             @id @default(autoincrement())
  line_account_id  Int?
  voucher_number   String                          @unique(map: "voucher_number") @db.VarChar(50)
  ar_id            Int
  receipt_date     DateTime                        @db.Date
  amount           Decimal                         @db.Decimal(12, 2)
  payment_method   receipt_vouchers_payment_method
  bank_account     String?                         @db.VarChar(100)
  reference_number String?                         @db.VarChar(100)
  slip_id          Int?
  attachment_path  String?                         @db.VarChar(500)
  notes            String?                         @db.Text
  metadata         String?                         @db.LongText
  created_by       Int?
  created_at       DateTime                        @default(now()) @db.Timestamp(0)

  @@index([ar_id], map: "idx_rv_ar")
  @@index([receipt_date], map: "idx_rv_date")
  @@index([line_account_id], map: "idx_rv_line_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model red_flag_symptoms {
  id              Int                         @id @default(autoincrement())
  symptom_code    String                      @unique(map: "symptom_code") @db.VarChar(50)
  symptom_name_th String                      @db.VarChar(255)
  symptom_name_en String?                     @db.VarChar(255)
  description     String?                     @db.Text
  severity        red_flag_symptoms_severity? @default(warning)
  action_required String?                     @db.Text
  is_active       Boolean?                    @default(true)
  created_at      DateTime?                   @default(now()) @db.Timestamp(0)
}

model restock_notifications {
  id                Int      @id @default(autoincrement())
  wishlist_id       Int?
  user_id           Int
  product_id        Int
  notification_type String?  @default("restock") @db.VarChar(50)
  old_stock         Int?     @default(0)
  new_stock         Int?     @default(0)
  message           String?  @db.Text
  sent_at           DateTime @default(now()) @db.Timestamp(0)

  @@index([product_id], map: "idx_product")
  @@index([user_id], map: "idx_user")
}

model reward_redemptions {
  id                   Int                        @id @default(autoincrement())
  user_id              Int
  reward_id            Int
  line_account_id      Int?
  points_used          Int
  status               reward_redemptions_status? @default(pending)
  created_at           DateTime                   @default(now()) @db.Timestamp(0)
  redemption_code      String?                    @db.VarChar(50)
  notes                String?                    @db.Text
  approved_by          Int?
  approved_at          DateTime?                  @db.Timestamp(0)
  delivered_at         DateTime?                  @db.Timestamp(0)
  expires_at           DateTime?                  @db.Date
  expiry_reminder_sent Boolean?                   @default(false)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model rewards {
  id              Int                  @id @default(autoincrement())
  line_account_id Int?
  name            String               @db.VarChar(255)
  description     String?              @db.Text
  image_url       String?              @db.VarChar(500)
  points_required Int
  reward_type     rewards_reward_type? @default(discount)
  reward_value    Decimal?             @db.Decimal(10, 2)
  stock           Int?                 @default(-1)
  is_active       Boolean?             @default(true)
  start_date      DateTime?            @db.Date
  end_date        DateTime?            @db.Date
  created_at      DateTime             @default(now()) @db.Timestamp(0)
  max_per_user    Int?                 @default(0)
  terms           String?              @db.Text
  sort_order      Int?                 @default(0)

  @@index([line_account_id], map: "idx_reward_line_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model rich_menu_aliases {
  id                Int      @id @default(autoincrement())
  line_account_id   Int
  alias_id          String   @db.VarChar(100)
  alias_name        String   @db.VarChar(50)
  rich_menu_id      Int
  line_rich_menu_id String   @db.VarChar(100)
  description       String?  @db.VarChar(255)
  created_at        DateTime @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, alias_name], map: "unique_alias")
  @@index([alias_id], map: "idx_alias_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model rich_menu_rules {
  id              Int      @id @default(autoincrement())
  line_account_id Int
  name            String   @db.VarChar(100)
  description     String?  @db.Text
  rich_menu_id    Int
  priority        Int?     @default(0)
  conditions      String   @db.LongText
  is_active       Boolean? @default(true)
  created_at      DateTime @default(now()) @db.Timestamp(0)
  updated_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([is_active], map: "idx_active")
  @@index([line_account_id], map: "idx_line_account")
  @@index([priority], map: "idx_priority")
}

model rich_menu_switch_log {
  id                Int                                @id @default(autoincrement())
  line_account_id   Int
  user_id           Int
  line_user_id      String                             @db.VarChar(50)
  from_rich_menu_id Int?
  to_rich_menu_id   Int
  trigger_type      rich_menu_switch_log_trigger_type? @default(rule)
  trigger_detail    String?                            @db.VarChar(255)
  created_at        DateTime                           @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_created")
  @@index([user_id], map: "idx_user")
}

model rich_menu_switch_pages {
  id                Int      @id @default(autoincrement())
  switch_set_id     Int
  page_number       Int      @default(1)
  page_name         String   @db.VarChar(50)
  rich_menu_id      Int
  line_rich_menu_id String?  @db.VarChar(100)
  alias_id          String?  @db.VarChar(100)
  created_at        DateTime @default(now()) @db.Timestamp(0)

  @@unique([switch_set_id, page_number], map: "unique_page")
  @@index([switch_set_id], map: "idx_set")
}

model rich_menu_switch_sets {
  id              Int      @id @default(autoincrement())
  line_account_id Int
  name            String   @db.VarChar(100)
  description     String?  @db.Text
  is_active       Boolean? @default(true)
  created_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model rich_menus {
  id                Int                   @id @default(autoincrement())
  line_account_id   Int?
  line_rich_menu_id String?               @db.VarChar(100)
  name              String                @db.VarChar(255)
  menu_type         rich_menus_menu_type? @default(custom)
  chat_bar_text     String?               @db.VarChar(50)
  size_width        Int?                  @default(2500)
  size_height       Int?                  @default(1686)
  areas             String?               @db.LongText
  image_path        String?               @db.VarChar(255)
  is_default        Boolean?              @default(false)
  is_active         Boolean?              @default(true)
  created_at        DateTime              @default(now()) @db.Timestamp(0)
  target_audience   String?               @db.VarChar(50)

  @@index([line_account_id], map: "idx_richmenu_line_account")
}

model scheduled_messages {
  id              Int                             @id @default(autoincrement())
  line_account_id Int?
  title           String                          @db.VarChar(255)
  message_type    String?                         @default("text") @db.VarChar(50)
  content         String                          @db.Text
  target_type     scheduled_messages_target_type? @default(all)
  target_id       Int?
  scheduled_at    DateTime                        @default(now()) @db.Timestamp(0)
  repeat_type     scheduled_messages_repeat_type? @default(none)
  status          scheduled_messages_status?      @default(pending)
  created_at      DateTime                        @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_scheduled_line_account")
  @@index([status], map: "idx_scheduled_status")
}

model scheduled_report_logs {
  id               Int                          @id @default(autoincrement())
  report_id        Int
  sent_at          DateTime                     @db.DateTime(0)
  recipients_count Int                          @default(0)
  status           scheduled_report_logs_status
  report_data      String?                      @db.LongText
  error_message    String?                      @db.Text

  @@index([report_id, sent_at], map: "idx_report_sent")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model scheduled_report_recipients {
  id            Int                                       @id @default(autoincrement())
  report_id     Int
  admin_user_id Int
  line_user_id  String?                                   @db.VarChar(50)
  notify_method scheduled_report_recipients_notify_method @default(line)
  created_at    DateTime                                  @default(now()) @db.Timestamp(0)

  @@unique([report_id, admin_user_id], map: "unique_report_recipient")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model scheduled_reports {
  id              Int       @id @default(autoincrement())
  line_account_id Int?
  name            String    @db.VarChar(255)
  report_type     String    @db.VarChar(50)
  schedule        String    @db.VarChar(50)
  recipients      String?   @db.LongText
  parameters      String?   @db.LongText
  last_run        DateTime? @db.Timestamp(0)
  next_run        DateTime? @db.Timestamp(0)
  is_active       Boolean?  @default(true)
  created_at      DateTime  @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_report_line_account")
}

model segment_members {
  segment_id Int
  user_id    Int
  score      Decimal? @default(0.00) @db.Decimal(10, 2)
  added_at   DateTime @default(now()) @db.Timestamp(0)

  @@id([segment_id, user_id])
  @@index([user_id], map: "user_id")
}

model settings {
  id          Int      @id @default(autoincrement())
  key         String   @unique(map: "key") @db.VarChar(100)
  value       String?  @db.Text
  type        String?  @default("string") @db.VarChar(20)
  description String?  @db.Text
  updated_at  DateTime @default(now()) @db.Timestamp(0)
}

model setup_progress {
  id              Int                    @id @default(autoincrement())
  line_account_id Int
  item_key        String                 @db.VarChar(50)
  status          setup_progress_status? @default(pending)
  completed_at    DateTime?              @db.Timestamp(0)
  notes           String?                @db.Text
  created_at      DateTime               @default(now()) @db.Timestamp(0)
  updated_at      DateTime               @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, item_key], map: "unique_progress")
  @@index([line_account_id], map: "idx_line_account")
  @@index([status], map: "idx_status")
}

model shared_flex_messages {
  id              Int       @id @default(autoincrement())
  line_account_id Int?
  share_code      String    @unique(map: "share_code") @db.VarChar(20)
  title           String?   @db.VarChar(255)
  flex_content    String    @db.LongText
  view_count      Int?      @default(0)
  share_count     Int?      @default(0)
  created_by      Int?
  expires_at      DateTime? @db.Timestamp(0)
  created_at      DateTime  @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_account")
  @@index([share_code], map: "idx_share_code")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model shop_settings {
  id                     Int      @id @default(autoincrement())
  line_account_id        Int?     @unique(map: "unique_shop_line_account")
  shop_name              String?  @default("LINE Shop") @db.VarChar(255)
  shop_logo              String?  @db.VarChar(500)
  welcome_message        String?  @db.Text
  shipping_fee           Decimal? @default(50.00) @db.Decimal(10, 2)
  free_shipping_min      Decimal? @default(500.00) @db.Decimal(10, 2)
  bank_accounts          String?  @db.Text
  promptpay_number       String?  @db.VarChar(20)
  contact_phone          String?  @db.VarChar(20)
  is_open                Boolean? @default(true)
  created_at             DateTime @default(now()) @db.Timestamp(0)
  pharmacy_license       String?  @db.VarChar(100)
  pharmacist_name        String?  @db.VarChar(255)
  pharmacist_license     String?  @db.VarChar(100)
  shop_email             String?  @db.VarChar(255)
  privacy_policy_version String?  @default("1.0") @db.VarChar(20)
  terms_version          String?  @default("1.0") @db.VarChar(20)
  cod_enabled            Boolean? @default(false)
  cod_fee                Decimal? @default(0.00) @db.Decimal(10, 2)
  auto_confirm_payment   Boolean? @default(false)
  shop_address           String?  @db.Text
  line_id                String?  @db.VarChar(100)
  facebook_url           String?  @db.VarChar(500)
  instagram_url          String?  @db.VarChar(500)

  @@index([line_account_id], map: "idx_shop_line_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model stock_adjustments {
  id                Int                               @id @default(autoincrement())
  line_account_id   Int?
  adjustment_number String                            @unique(map: "adjustment_number") @db.VarChar(30)
  adjustment_type   stock_adjustments_adjustment_type
  product_id        Int
  quantity          Int
  reason            stock_adjustments_reason
  reason_detail     String?                           @db.Text
  stock_before      Int
  stock_after       Int
  status            stock_adjustments_status?         @default(draft)
  created_by        Int?
  confirmed_at      DateTime?                         @db.Timestamp(0)
  created_at        DateTime                          @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_adj_line_account")
  @@index([adjustment_number], map: "idx_adj_number")
  @@index([product_id], map: "idx_adj_product")
  @@index([status], map: "idx_adj_status")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model stock_movements {
  id               Int      @id @default(autoincrement())
  line_account_id  Int?
  product_id       Int
  unit_id          Int?
  unit_name        String?  @db.VarChar(50)
  unit_factor      Decimal? @default(1.0000) @db.Decimal(10, 4)
  movement_type    String   @db.VarChar(50)
  quantity         Int
  stock_before     Int
  stock_after      Int
  reference_type   String?  @db.VarChar(50)
  reference_id     Int?
  reference_number String?  @db.VarChar(50)
  notes            String?  @db.Text
  created_by       Int?
  created_at       DateTime @default(now()) @db.Timestamp(0)
  unit_cost        Decimal? @default(0.00) @db.Decimal(12, 2)
  value_change     Decimal? @default(0.00) @db.Decimal(12, 2)

  @@index([created_at], map: "idx_sm_created")
  @@index([line_account_id], map: "idx_sm_line_account")
  @@index([product_id], map: "idx_sm_product")
  @@index([reference_type, reference_id], map: "idx_sm_reference")
  @@index([movement_type], map: "idx_sm_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model suppliers {
  id                    Int      @id @default(autoincrement())
  line_account_id       Int?
  code                  String?  @unique(map: "code") @db.VarChar(20)
  name                  String   @db.VarChar(255)
  contact_person        String?  @db.VarChar(255)
  phone                 String?  @db.VarChar(50)
  email                 String?  @db.VarChar(255)
  address               String?  @db.Text
  tax_id                String?  @db.VarChar(20)
  payment_terms         Int?     @default(30)
  total_purchase_amount Decimal? @default(0.00) @db.Decimal(15, 2)
  is_active             Boolean? @default(true)
  created_at            DateTime @default(now()) @db.Timestamp(0)
  updated_at            DateTime @default(now()) @db.Timestamp(0)

  @@index([is_active], map: "idx_supplier_active")
  @@index([code], map: "idx_supplier_code")
  @@index([line_account_id], map: "idx_supplier_line_account")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model symptom_analysis_cache {
  id              Int       @id @default(autoincrement())
  image_hash      String    @unique(map: "image_hash") @db.VarChar(64)
  image_url       String?   @db.Text
  analysis_result String?   @db.LongText
  is_urgent       Boolean?  @default(false)
  created_at      DateTime? @default(now()) @db.DateTime(0)
  expires_at      DateTime? @db.DateTime(0)

  @@index([image_hash], map: "idx_hash")
  @@index([is_urgent], map: "idx_urgent")
}

model symptom_assessment_followups {
  id            Int                                  @id @default(autoincrement())
  assessment_id Int
  followup_date DateTime                             @db.Date
  status        symptom_assessment_followups_status? @default(pending)
  notes         String?                              @db.Text
  created_at    DateTime                             @default(now()) @db.Timestamp(0)

  @@index([assessment_id], map: "idx_assessment_id")
  @@index([followup_date], map: "idx_followup_date")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model symptom_assessments {
  id                  Int                               @id @default(autoincrement())
  line_account_id     Int?
  user_id             Int
  session_id          String?                           @db.VarChar(100)
  symptoms            String?                           @db.LongText
  duration            String?                           @db.VarChar(100)
  severity            Int?
  medical_history     String?                           @db.LongText
  allergies           String?                           @db.LongText
  current_medications String?                           @db.LongText
  ai_assessment       String?                           @db.Text
  ai_recommendations  String?                           @db.LongText
  triage_level        symptom_assessments_triage_level? @default(green)
  red_flags           String?                           @db.LongText
  status              symptom_assessments_status?       @default(in_progress)
  pharmacist_id       Int?
  pharmacist_notes    String?                           @db.Text
  created_at          DateTime                          @default(now()) @db.Timestamp(0)
  updated_at          DateTime                          @default(now()) @db.Timestamp(0)

  @@index([status], map: "idx_assessment_status")
  @@index([user_id], map: "idx_assessment_user")
}

model sync_batches {
  id             Int                  @id @default(autoincrement())
  batch_name     String               @db.VarChar(255)
  total_jobs     Int?                 @default(0)
  completed_jobs Int?                 @default(0)
  failed_jobs    Int?                 @default(0)
  skipped_jobs   Int?                 @default(0)
  status         sync_batches_status? @default(pending)
  started_at     DateTime?            @db.DateTime(0)
  completed_at   DateTime?            @db.DateTime(0)
  created_at     DateTime?            @default(now()) @db.DateTime(0)

  @@index([created_at], map: "idx_created_at")
  @@index([status], map: "idx_status")
}

model sync_config {
  config_key   String    @id @db.VarChar(100)
  config_value String?   @db.Text
  description  String?   @db.VarChar(255)
  updated_at   DateTime? @default(now()) @db.DateTime(0)
}

model sync_logs {
  id          Int       @id @default(autoincrement())
  queue_id    Int?
  sku         String?   @db.VarChar(50)
  action      String    @db.VarChar(50)
  duration_ms Int?
  details     String?   @db.LongText
  created_at  DateTime? @default(now()) @db.DateTime(0)

  @@index([created_at], map: "idx_created_at")
  @@index([sku], map: "idx_sku")
}

model sync_queue {
  id                      Int                @id @default(autoincrement())
  sku                     String             @unique(map: "idx_sku") @db.VarChar(50)
  status                  sync_queue_status? @default(pending)
  priority                Int?               @default(5) @db.TinyInt
  attempts                Int?               @default(0) @db.TinyInt
  max_attempts            Int?               @default(3) @db.TinyInt
  api_data                String?            @db.LongText
  result                  String?            @db.LongText
  error_message           String?            @db.Text
  processing_started_at   DateTime?          @db.DateTime(0)
  processing_completed_at DateTime?          @db.DateTime(0)
  created_at              DateTime?          @default(now()) @db.DateTime(0)
  updated_at              DateTime?          @default(now()) @db.DateTime(0)

  @@index([status], map: "idx_status")
}

model tags {
  id         Int       @id @default(autoincrement())
  name       String    @db.VarChar(50)
  color      String?   @default("gray") @db.VarChar(20)
  created_at DateTime? @default(now()) @db.Timestamp(0)
}

model telegram_settings {
  id                  Int      @id @default(autoincrement())
  line_account_id     Int?
  is_enabled          Boolean? @default(false)
  bot_token           String?  @db.VarChar(255)
  chat_id             String?  @db.VarChar(100)
  notify_new_follower Boolean? @default(true)
  notify_new_message  Boolean? @default(true)
  notify_unfollow     Boolean? @default(true)
  created_at          DateTime @default(now()) @db.Timestamp(0)
  notify_new_order    Boolean? @default(true)
  notify_payment      Boolean? @default(true)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model temperature_logs {
  id              Int       @id @default(autoincrement())
  line_account_id Int
  location_id     Int?
  temperature     Decimal   @db.Decimal(5, 2)
  humidity        Decimal?  @db.Decimal(5, 2)
  recorded_by     Int
  recorded_at     DateTime  @db.DateTime(0)
  notes           String?   @db.Text
  alert_triggered Boolean?  @default(false)
  created_at      DateTime? @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_line_account")
  @@index([location_id], map: "idx_location")
  @@index([recorded_at], map: "idx_recorded_date")
}

model templates {
  id              Int      @id @default(autoincrement())
  line_account_id Int?
  name            String   @db.VarChar(255)
  category        String?  @db.VarChar(100)
  message_type    String?  @default("text") @db.VarChar(50)
  content         String   @db.Text
  created_at      DateTime @default(now()) @db.Timestamp(0)
}

model testing_results {
  id         Int      @id @default(autoincrement())
  user_id    Int
  user_name  String?  @db.VarChar(255)
  test_data  String   @db.LongText
  created_at DateTime @default(now()) @db.Timestamp(0)
  updated_at DateTime @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_created")
  @@index([user_id], map: "idx_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tier_settings {
  id              Int      @id @default(autoincrement())
  line_account_id Int?
  name            String   @db.VarChar(50)
  min_points      Int      @default(0)
  multiplier      Decimal? @default(1.00) @db.Decimal(3, 2)
  benefits        String?  @db.Text
  badge_color     String?  @db.VarChar(50)
  created_at      DateTime @default(now()) @db.Timestamp(0)
  updated_at      DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_tier_account")
  @@index([min_points], map: "idx_tier_points")
}

model tracked_links {
  id              Int       @id @default(autoincrement())
  line_account_id Int?
  short_code      String    @unique(map: "short_code") @db.VarChar(20)
  original_url    String    @db.Text
  title           String?   @db.VarChar(255)
  campaign_id     Int?
  auto_tag_id     Int?
  click_count     Int?      @default(0)
  unique_clicks   Int?      @default(0)
  is_active       Boolean?  @default(true)
  expires_at      DateTime? @db.Timestamp(0)
  created_at      DateTime  @default(now()) @db.Timestamp(0)

  @@index([line_account_id], map: "idx_account")
  @@index([short_code], map: "idx_short_code")
}

model transaction_items {
  id             Int     @id @default(autoincrement())
  transaction_id Int
  product_id     Int?
  product_name   String  @db.VarChar(255)
  product_sku    String? @db.VarChar(100)
  product_price  Decimal @db.Decimal(10, 2)
  quantity       Int
  subtotal       Decimal @db.Decimal(10, 2)

  @@index([product_id], map: "idx_item_product")
  @@index([transaction_id], map: "idx_item_transaction")
}

model transactions {
  id                        Int                          @id @default(autoincrement())
  line_account_id           Int?
  order_number              String                       @unique(map: "order_number") @db.VarChar(50)
  user_id                   Int
  total_amount              Decimal                      @db.Decimal(12, 2)
  shipping_fee              Decimal?                     @default(0.00) @db.Decimal(10, 2)
  discount_amount           Decimal?                     @default(0.00) @db.Decimal(10, 2)
  points_used               Int?                         @default(0)
  points_discount           Decimal?                     @default(0.00) @db.Decimal(10, 2)
  grand_total               Decimal                      @db.Decimal(12, 2)
  status                    String?                      @default("pending") @db.VarChar(50)
  payment_method            String?                      @db.VarChar(50)
  payment_status            transactions_payment_status? @default(pending)
  shipping_name             String?                      @db.VarChar(255)
  shipping_phone            String?                      @db.VarChar(20)
  shipping_address          String?                      @db.Text
  shipping_tracking         String?                      @db.VarChar(100)
  shipping_provider         String?                      @db.VarChar(100)
  note                      String?                      @db.Text
  admin_note                String?                      @db.Text
  created_at                DateTime                     @default(now()) @db.Timestamp(0)
  updated_at                DateTime                     @default(now()) @db.Timestamp(0)
  transaction_type          String?                      @default("purchase") @db.VarChar(50)
  delivery_info             String?                      @db.Text
  line_user_id              String?                      @db.VarChar(50)
  wms_status                transactions_wms_status?
  picker_id                 Int?
  packer_id                 Int?
  pick_started_at           DateTime?                    @db.DateTime(0)
  pick_completed_at         DateTime?                    @db.DateTime(0)
  pack_started_at           DateTime?                    @db.DateTime(0)
  pack_completed_at         DateTime?                    @db.DateTime(0)
  shipped_at                DateTime?                    @db.DateTime(0)
  carrier                   String?                      @db.VarChar(50)
  package_weight            Decimal?                     @db.Decimal(10, 2)
  package_dimensions        String?                      @db.VarChar(50)
  wms_exception             String?                      @db.VarChar(255)
  wms_exception_resolved_at DateTime?                    @db.DateTime(0)
  wms_exception_resolved_by Int?
  label_printed_at          DateTime?                    @db.DateTime(0)

  @@index([created_at], map: "idx_order_created")
  @@index([line_account_id], map: "idx_order_line_account")
  @@index([status], map: "idx_order_status")
  @@index([user_id], map: "idx_order_user")
}

model triage_analytics {
  id                          Int      @id @default(autoincrement())
  date                        DateTime @db.Date
  line_account_id             Int?
  total_sessions              Int?     @default(0)
  completed_sessions          Int?     @default(0)
  escalated_sessions          Int?     @default(0)
  urgent_sessions             Int?     @default(0)
  avg_completion_time_minutes Decimal? @default(0.00) @db.Decimal(10, 2)
  top_symptoms                String?  @db.LongText
  created_at                  DateTime @default(now()) @db.Timestamp(0)
  updated_at                  DateTime @default(now()) @db.Timestamp(0)

  @@unique([date, line_account_id], map: "idx_date_account")
  @@index([date], map: "idx_date")
}

model triage_sessions {
  id                 Int                          @id @default(autoincrement())
  line_account_id    Int?
  user_id            Int
  current_state      String?                      @default("greeting") @db.VarChar(50)
  triage_data        String?                      @db.LongText
  status             triage_sessions_status?      @default(active)
  assessment_id      Int?
  triage_level       triage_sessions_triage_level
  chief_complaint    String?                      @db.Text
  vital_signs        String?                      @db.LongText
  red_flags_detected String?                      @db.LongText
  ai_recommendation  String?                      @db.Text
  pharmacist_action  String?                      @db.Text
  outcome            triage_sessions_outcome?     @default(self_care)
  follow_up_date     DateTime?                    @db.Date
  created_at         DateTime                     @default(now()) @db.Timestamp(0)
  updated_at         DateTime                     @default(now()) @db.Timestamp(0)
  completed_at       DateTime?                    @db.Timestamp(0)
  pharmacist_id      Int?
  pharmacist_note    String?                      @db.Text

  @@index([status], map: "idx_status")
  @@index([triage_level], map: "idx_triage_level")
  @@index([user_id], map: "idx_triage_user")
}

model user_behaviors {
  id                Int      @id @default(autoincrement())
  line_account_id   Int?
  user_id           Int
  behavior_type     String   @db.VarChar(50)
  behavior_category String?  @db.VarChar(100)
  behavior_data     String?  @db.LongText
  source            String?  @db.VarChar(50)
  session_id        String?  @db.VarChar(100)
  created_at        DateTime @default(now()) @db.Timestamp(0)

  @@index([line_account_id, behavior_type], map: "idx_account_behavior")
  @@index([created_at], map: "idx_created")
  @@index([user_id, behavior_type], map: "idx_user_behavior")
}

model user_consents {
  id              Int                        @id @default(autoincrement())
  user_id         Int
  consent_type    user_consents_consent_type
  consent_version String                     @default("1.0") @db.VarChar(20)
  is_accepted     Boolean                    @default(false)
  accepted_at     DateTime?                  @db.DateTime(0)
  withdrawn_at    DateTime?                  @db.DateTime(0)
  ip_address      String?                    @db.VarChar(45)
  user_agent      String?                    @db.Text
  created_at      DateTime?                  @default(now()) @db.DateTime(0)
  updated_at      DateTime?                  @default(now()) @db.DateTime(0)

  @@unique([user_id, consent_type], map: "unique_user_consent")
  @@index([user_id], map: "idx_user_id")
}

model user_current_medications {
  id              Int       @id @default(autoincrement())
  line_user_id    String    @db.VarChar(50)
  line_account_id Int?      @default(0)
  medication_name String    @db.VarChar(255)
  product_id      Int?
  dosage          String?   @db.VarChar(100)
  frequency       String?   @db.VarChar(100)
  start_date      DateTime? @db.Date
  notes           String?   @db.Text
  is_active       Boolean?  @default(true)
  created_at      DateTime  @default(now()) @db.Timestamp(0)
  updated_at      DateTime  @default(now()) @db.Timestamp(0)

  @@index([is_active], map: "idx_active")
  @@index([line_user_id], map: "idx_line_user")
}

model user_custom_field_values {
  id          Int      @id @default(autoincrement())
  user_id     Int
  field_id    Int
  field_value String?  @db.Text
  created_at  DateTime @default(now()) @db.Timestamp(0)
  updated_at  DateTime @default(now()) @db.Timestamp(0)

  @@unique([user_id, field_id], map: "unique_user_field")
  @@index([field_id], map: "idx_field_values_field")
  @@index([user_id], map: "idx_field_values_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_custom_fields {
  id              Int                            @id @default(autoincrement())
  line_account_id Int?
  field_name      String                         @db.VarChar(100)
  field_key       String                         @db.VarChar(50)
  field_type      user_custom_fields_field_type? @default(text)
  field_options   String?                        @db.LongText
  is_required     Boolean?                       @default(false)
  sort_order      Int?                           @default(0)
  is_active       Boolean?                       @default(true)
  created_at      DateTime                       @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, field_key], map: "unique_field_key")
  @@index([line_account_id], map: "idx_custom_fields_account")
}

model user_drug_allergies {
  id              Int                                @id @default(autoincrement())
  line_user_id    String                             @db.VarChar(50)
  line_account_id Int?                               @default(0)
  drug_name       String                             @db.VarChar(255)
  drug_id         Int?
  reaction_type   user_drug_allergies_reaction_type? @default(other)
  reaction_notes  String?                            @db.Text
  severity        user_drug_allergies_severity?      @default(moderate)
  created_at      DateTime                           @default(now()) @db.Timestamp(0)

  @@index([drug_name], map: "idx_drug")
  @@index([line_user_id], map: "idx_line_user")
}

model user_groups {
  user_id  Int
  group_id Int

  @@id([user_id, group_id])
  @@index([group_id], map: "group_id")
}

model user_health_profiles {
  id                 Int                              @id @default(autoincrement())
  line_user_id       String                           @db.VarChar(50)
  line_account_id    Int?                             @default(0)
  age                Int?
  gender             user_health_profiles_gender?
  weight             Decimal?                         @db.Decimal(5, 2)
  height             Decimal?                         @db.Decimal(5, 2)
  blood_type         user_health_profiles_blood_type? @default(unknown)
  medical_conditions String?                          @db.LongText
  created_at         DateTime                         @default(now()) @db.Timestamp(0)
  updated_at         DateTime                         @default(now()) @db.Timestamp(0)

  @@unique([line_user_id, line_account_id], map: "unique_user")
  @@index([line_user_id], map: "idx_line_user")
}

model user_notes {
  id         Int       @id @default(autoincrement())
  user_id    Int
  note       String?   @db.Text
  created_by Int?
  created_at DateTime? @default(now()) @db.Timestamp(0)

  @@index([user_id], map: "user_id")
}

model user_notification_preferences {
  id                    Int      @id @default(autoincrement())
  user_id               Int      @unique(map: "unique_user")
  line_user_id          String?  @db.VarChar(50)
  line_account_id       Int?
  order_updates         Boolean? @default(true)
  promotions            Boolean? @default(true)
  appointment_reminders Boolean? @default(true)
  drug_reminders        Boolean? @default(true)
  health_tips           Boolean? @default(false)
  price_alerts          Boolean? @default(true)
  restock_alerts        Boolean? @default(true)
  created_at            DateTime @default(now()) @db.Timestamp(0)
  updated_at            DateTime @default(now()) @db.Timestamp(0)

  @@index([line_user_id], map: "idx_line_user")
}

model user_notification_settings {
  id                    Int      @id @default(autoincrement())
  user_id               Int      @unique(map: "user_id")
  order_updates         Boolean? @default(true)
  promotions            Boolean? @default(true)
  appointment_reminders Boolean? @default(true)
  drug_reminders        Boolean? @default(true)
  health_tips           Boolean? @default(false)
  created_at            DateTime @default(now()) @db.Timestamp(0)
  updated_at            DateTime @default(now()) @db.Timestamp(0)

  @@index([user_id], map: "idx_user")
}

model user_points {
  id               Int      @id @default(autoincrement())
  user_id          Int
  line_account_id  Int?
  total_points     Int?     @default(0)
  available_points Int?     @default(0)
  used_points      Int?     @default(0)
  tier             String?  @default("member") @db.VarChar(20)
  created_at       DateTime @default(now()) @db.Timestamp(0)
  updated_at       DateTime @default(now()) @db.Timestamp(0)

  @@unique([user_id, line_account_id], map: "unique_user_account")
  @@index([user_id], map: "idx_user_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_profiles_extended {
  user_id              Int                                   @id
  birthday             DateTime?                             @db.Date
  gender               user_profiles_extended_gender?        @default(unknown)
  phone                String?                               @db.VarChar(20)
  email                String?                               @db.VarChar(255)
  address              String?                               @db.Text
  province             String?                               @db.VarChar(100)
  postal_code          String?                               @db.VarChar(10)
  customer_type        user_profiles_extended_customer_type? @default(new)
  lifetime_value       Decimal?                              @default(0.00) @db.Decimal(12, 2)
  total_orders         Int?                                  @default(0)
  average_order_value  Decimal?                              @default(0.00) @db.Decimal(10, 2)
  last_purchase_at     DateTime?                             @db.Timestamp(0)
  first_purchase_at    DateTime?                             @db.Timestamp(0)
  preferred_categories String?                               @db.LongText
  interests            String?                               @db.LongText
  custom_fields        String?                               @db.LongText
  engagement_score     Int?                                  @default(0)
  updated_at           DateTime                              @default(now()) @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_rich_menus {
  id                Int      @id @default(autoincrement())
  line_account_id   Int
  user_id           Int
  line_user_id      String   @db.VarChar(50)
  rich_menu_id      Int
  line_rich_menu_id String   @db.VarChar(100)
  rule_id           Int?
  assigned_reason   String?  @db.VarChar(255)
  assigned_at       DateTime @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, user_id], map: "unique_user")
  @@index([line_user_id], map: "idx_line_user")
  @@index([rich_menu_id], map: "idx_rich_menu")
}

model user_states {
  user_id    Int       @id
  state      String    @db.VarChar(50)
  state_data String?   @db.LongText
  expires_at DateTime? @db.Timestamp(0)
  updated_at DateTime  @default(now()) @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_wishlist {
  id                Int       @id @default(autoincrement())
  user_id           Int
  line_user_id      String?   @db.VarChar(50)
  product_id        Int
  line_account_id   Int?
  price_when_added  Decimal?  @default(0.00) @db.Decimal(10, 2)
  notify_on_sale    Boolean?  @default(true)
  notify_on_restock Boolean?  @default(false)
  notified_at       DateTime? @db.Timestamp(0)
  created_at        DateTime  @default(now()) @db.Timestamp(0)

  @@unique([user_id, product_id], map: "unique_user_product")
  @@index([line_user_id], map: "idx_line_user")
  @@index([notify_on_sale, notified_at], map: "idx_notify")
  @@index([product_id], map: "idx_product")
}

model vibe_selling_settings {
  id              Int       @id @default(autoincrement())
  line_account_id Int?
  setting_key     String    @db.VarChar(100)
  setting_value   String?   @db.Text
  created_at      DateTime? @default(now()) @db.Timestamp(0)
  updated_at      DateTime? @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, setting_key], map: "uk_vibe_setting")
  @@index([setting_key], map: "idx_key")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model video_call_settings {
  id                  Int       @id @default(autoincrement())
  line_account_id     Int?      @unique(map: "unique_account")
  is_enabled          Boolean?  @default(true)
  auto_answer         Boolean?  @default(false)
  max_duration        Int?      @default(3600)
  working_hours_start DateTime? @default(dbgenerated("('09:00:00')")) @db.Time(0)
  working_hours_end   DateTime? @default(dbgenerated("('18:00:00')")) @db.Time(0)
  offline_message     String?   @default("ขณะนี้อยู่นอกเวลาทำการ กรุณาติดต่อใหม่ในเวลาทำการ") @db.Text
  created_at          DateTime  @default(now()) @db.Timestamp(0)
  updated_at          DateTime  @default(now()) @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model video_call_signals {
  id          Int                             @id @default(autoincrement())
  call_id     Int
  signal_type String                          @db.VarChar(50)
  signal_data String                          @db.LongText
  from_who    String?                         @default("customer") @db.VarChar(20)
  processed   Boolean?                        @default(false)
  sender_type video_call_signals_sender_type? @default(customer)
  created_at  DateTime                        @default(now()) @db.Timestamp(0)

  @@index([call_id], map: "idx_call")
  @@index([call_id, from_who, processed], map: "idx_signal_poll")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model video_calls {
  id               Int                 @id @default(autoincrement())
  line_account_id  Int?
  appointment_id   Int?
  user_id          Int
  line_user_id     String?             @db.VarChar(50)
  display_name     String?             @db.VarChar(255)
  picture_url      String?             @db.VarChar(500)
  pharmacist_id    Int?
  room_id          String?             @unique(map: "room_id") @db.VarChar(100)
  status           video_calls_status? @default(pending)
  duration         Int?                @default(0)
  started_at       DateTime?           @db.Timestamp(0)
  ended_at         DateTime?           @db.Timestamp(0)
  duration_seconds Int?
  notes            String?             @db.Text
  created_at       DateTime            @default(now()) @db.Timestamp(0)

  @@index([room_id], map: "idx_video_room")
  @@index([user_id], map: "idx_video_user")
}

model warehouse_locations {
  id              Int                                  @id @default(autoincrement())
  line_account_id Int?                                 @default(1)
  location_code   String                               @db.VarChar(20)
  zone            String                               @db.VarChar(10)
  shelf           Int
  bin             Int
  zone_type       String                               @default("general") @db.VarChar(50)
  ergonomic_level warehouse_locations_ergonomic_level? @default(golden)
  capacity        Int?                                 @default(100)
  current_qty     Int?                                 @default(0)
  description     String?                              @db.VarChar(255)
  is_active       Boolean?                             @default(true)
  created_at      DateTime                             @default(now()) @db.Timestamp(0)
  updated_at      DateTime                             @default(now()) @db.Timestamp(0)

  @@unique([location_code, line_account_id], map: "uk_location_code")
  @@index([ergonomic_level], map: "idx_ergonomic")
  @@index([line_account_id], map: "idx_line_account")
  @@index([location_code], map: "idx_location_code")
  @@index([zone], map: "idx_zone")
  @@index([zone_type], map: "idx_zone_type")
}

model webhook_events {
  id         Int      @id @default(autoincrement())
  event_id   String   @unique(map: "event_id") @db.VarChar(100)
  created_at DateTime @default(now()) @db.Timestamp(0)

  @@index([created_at], map: "idx_webhook_created")
}

model welcome_settings {
  id              Int                            @id @default(autoincrement())
  line_account_id Int?
  is_enabled      Boolean?                       @default(true)
  message_type    welcome_settings_message_type? @default(text)
  text_content    String?                        @db.Text
  flex_content    String?                        @db.LongText
  created_at      DateTime                       @default(now()) @db.Timestamp(0)
  updated_at      DateTime                       @default(now()) @db.Timestamp(0)
  enabled         Boolean?                       @default(true)
  text_message    String?                        @db.Text
  flex_json       String?                        @db.LongText
  delay_seconds   Int?                           @default(0)

  @@index([line_account_id], map: "idx_welcome_line_account")
}

model wishlist {
  id         Int      @id @default(autoincrement())
  user_id    Int
  product_id Int
  created_at DateTime @default(now()) @db.Timestamp(0)

  @@unique([user_id, product_id], map: "unique_wishlist")
  @@index([product_id], map: "idx_product")
  @@index([user_id], map: "idx_user")
}

model wishlist_notifications {
  id                Int                                      @id @default(autoincrement())
  wishlist_id       Int
  user_id           Int
  product_id        Int
  notification_type wishlist_notifications_notification_type
  old_price         Decimal?                                 @db.Decimal(10, 2)
  new_price         Decimal?                                 @db.Decimal(10, 2)
  discount_percent  Int?
  message           String?                                  @db.Text
  sent_at           DateTime                                 @default(now()) @db.Timestamp(0)

  @@index([sent_at], map: "idx_sent")
  @@index([user_id], map: "idx_user")
  @@index([wishlist_id], map: "idx_wishlist")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model wms_activity_logs {
  id              Int                      @id @default(autoincrement())
  line_account_id Int
  order_id        Int
  action          wms_activity_logs_action
  item_id         Int?
  staff_id        Int?
  notes           String?                  @db.Text
  metadata        String?                  @db.LongText
  created_at      DateTime?                @default(now()) @db.DateTime(0)

  @@index([action], map: "idx_wms_log_action")
  @@index([created_at], map: "idx_wms_log_created")
  @@index([line_account_id], map: "idx_wms_log_line_account")
  @@index([order_id], map: "idx_wms_log_order")
  @@index([staff_id], map: "idx_wms_log_staff")
}

model wms_batch_pick_orders {
  id          Int                                @id @default(autoincrement())
  batch_id    Int
  order_id    Int
  pick_status wms_batch_pick_orders_pick_status? @default(pending)
  picked_at   DateTime?                          @db.DateTime(0)
  created_at  DateTime?                          @default(now()) @db.DateTime(0)

  @@unique([batch_id, order_id], map: "uk_batch_order")
  @@index([order_id], map: "idx_batch_pick_order")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model wms_batch_picks {
  id              Int                     @id @default(autoincrement())
  line_account_id Int
  batch_number    String                  @unique(map: "uk_batch_number") @db.VarChar(20)
  status          wms_batch_picks_status? @default(pending)
  picker_id       Int?
  total_orders    Int?                    @default(0)
  total_items     Int?                    @default(0)
  created_at      DateTime?               @default(now()) @db.DateTime(0)
  started_at      DateTime?               @db.DateTime(0)
  completed_at    DateTime?               @db.DateTime(0)

  @@index([created_at], map: "idx_batch_created")
  @@index([line_account_id], map: "idx_batch_line_account")
  @@index([picker_id], map: "idx_batch_picker")
  @@index([status], map: "idx_batch_status")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model wms_pick_items {
  id                  Int                    @id @default(autoincrement())
  order_id            Int
  transaction_item_id Int
  product_id          Int
  quantity_required   Int
  quantity_picked     Int?                   @default(0)
  status              wms_pick_items_status? @default(pending)
  picked_by           Int?
  picked_at           DateTime?              @db.DateTime(0)
  notes               String?                @db.Text
  created_at          DateTime?              @default(now()) @db.DateTime(0)
  updated_at          DateTime?              @default(now()) @db.DateTime(0)

  @@unique([order_id, transaction_item_id], map: "uk_order_item")
  @@index([order_id], map: "idx_pick_item_order")
  @@index([product_id], map: "idx_pick_item_product")
  @@index([status], map: "idx_pick_item_status")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model zone_types {
  id                   Int      @id @default(autoincrement())
  line_account_id      Int?     @default(1)
  code                 String   @db.VarChar(50)
  label                String   @db.VarChar(100)
  color                String?  @default("gray") @db.VarChar(20)
  icon                 String?  @default("fa-box") @db.VarChar(50)
  description          String?  @db.Text
  storage_requirements String?  @db.Text
  is_default           Boolean? @default(false)
  is_active            Boolean? @default(true)
  sort_order           Int?     @default(0)
  created_at           DateTime @default(now()) @db.Timestamp(0)
  updated_at           DateTime @default(now()) @db.Timestamp(0)

  @@unique([line_account_id, code], map: "uk_zone_type_code")
  @@index([is_active], map: "idx_zone_type_active")
}

enum business_settings_business_type {
  retail
  digital
  service
  hybrid
}

enum cleanup_actions_action_type {
  scan
  deprecate
  backup
  delete
  restore
}

enum dev_logs_log_type {
  error
  warning
  info
  debug
  webhook
}

enum cleanup_reports_report_type {
  scan
  cleanup
  rollback
}

enum pos_payments_payment_method {
  cash
  transfer
  card
  points
  credit
}

enum performance_metrics_metric_type {
  page_load
  conversation_switch
  message_render
  api_call
  scroll_performance
  cache_hit
  cache_miss
}

enum sync_queue_status {
  pending
  processing
  completed
  failed
  skipped
}

enum pharmacy_context_keywords_keyword_type {
  symptom
  drug
  condition
  action
}

enum drug_pricing_rules_rule_type {
  category
  brand
  generic
  margin
  promotion
}

enum consultation_logs_log_type {
  start
  end
  note
  prescription
}

enum consultation_stages_stage {
  symptom_assessment
  drug_recommendation
  purchase
  follow_up
}

enum user_profiles_extended_gender {
  male
  female
  other
  unknown
}

enum customer_health_profiles_communication_type {
  A
  B
  C
}

enum user_consents_consent_type {
  privacy_policy
  terms_of_service
  marketing
  health_data
}

enum business_items_item_type {
  physical
  digital
  service
  booking
  content
}

enum points_rules_rule_type {
  base
  campaign
  category
  tier
}

enum pos_cash_movements_movement_type {
  in
  out
}

enum welcome_settings_message_type {
  text
  flex
}

enum line_groups_group_type {
  group
  room
}

enum payment_vouchers_voucher_type {
  ap
  expense
}

enum broadcast_queue_status {
  pending
  sent
  failed
}

enum symptom_assessment_followups_status {
  pending
  improved
  same
  worse
  consulted_doctor
}

enum wms_activity_logs_action {
  pick_started
  item_picked
  pick_completed
  pack_started
  pack_completed
  label_printed
  shipped
  item_short
  item_damaged
  on_hold
  exception_resolved
}

enum consent_logs_action {
  accept
  withdraw
  update
}

enum auto_reply_rules_match_type {
  exact
  contains
  starts_with
  ends_with
  regex
}

enum messages_direction {
  incoming
  outgoing
}

enum pharmacy_context_keywords_widget_type {
  drug_info
  interaction
  symptom
  allergy
  pricing
  pregnancy
}

enum points_history_type {
  earn
  redeem
  expire
  adjust
  bonus
}

enum ai_conversations_role {
  user
  assistant
  system
}

enum wms_batch_picks_status {
  pending
  in_progress
  completed
  cancelled
}

enum setup_progress_status {
  pending
  in_progress
  completed
  skipped
}

enum points_transactions_type {
  earn
  redeem
  expire
  adjust
  refund
}

enum wms_batch_pick_orders_pick_status {
  pending
  picked
}

enum broadcast_campaigns_message_type {
  text
  flex
  image
  product_carousel
}

enum stock_adjustments_adjustment_type {
  increase
  decrease
}

enum consultation_analytics_communication_type {
  A
  B
  C
}

enum drip_campaign_progress_status {
  active
  completed
  cancelled
}

enum appointments_appointment_type {
  consultation
  video_call
  pickup
  delivery
}

enum auto_tag_logs_action {
  assign
  remove
}

enum rich_menus_menu_type {
  default
  member
  guest
  vip
  custom
}

enum customer_segments_segment_type {
  static
  dynamic
}

enum ai_conversation_history_role {
  user
  assistant
}

enum pharmacist_notifications_priority {
  normal
  urgent
}

enum goods_receives_status {
  draft
  confirmed
  cancelled
}

enum purchase_orders_status {
  draft
  submitted
  partial
  completed
  cancelled
}

enum user_custom_fields_field_type {
  text
  number
  date
  select
  checkbox
  textarea
}

enum auto_reply_rules_response_type {
  text
  flex
  image
  video
  audio
}

enum drip_campaign_steps_message_type {
  text
  flex
  image
}

enum prescription_approvals_status {
  pending
  approved
  rejected
  expired
  used
}

enum loyalty_points_history_type {
  earn
  redeem
  adjust
  expire
}

enum scheduled_report_recipients_notify_method {
  line
  email
  both
}

enum payment_proofs_status {
  pending
  approved
  rejected
}

enum drip_campaigns_trigger_type {
  follow
  tag_added
  purchase
  manual
}

enum scheduled_report_logs_status {
  success
  partial
  failed
}

enum user_health_profiles_gender {
  male
  female
  other
}

enum wishlist_notifications_notification_type {
  price_drop
  promotion
  restock
}

enum email_settings_smtp_secure {
  tls
  ssl
  none
}

enum reward_redemptions_status {
  pending
  approved
  delivered
  cancelled
  expired
}

enum drug_interactions_severity {
  mild
  moderate
  severe
  contraindicated
}

enum scheduled_messages_target_type {
  all
  group
  user
}

enum liff_message_logs_sent_via {
  liff
  api
}

enum conversation_multi_assignees_status {
  active
  resolved
}

enum red_flag_symptoms_severity {
  critical
  urgent
  warning
}

enum user_drug_allergies_reaction_type {
  rash
  breathing
  swelling
  other
}

enum coupons_discount_type {
  fixed
  percent
}

enum point_rewards_type {
  discount
  shipping
  gift
  product
  coupon
}

enum landing_banners_link_type {
  none
  internal
  external
}

enum drip_campaign_logs_status {
  sent
  failed
  skipped
}

enum user_tags_tag_type {
  manual
  auto
  system
  broadcast
}

enum expense_categories_expense_type {
  operating
  administrative
  financial
  other
}

enum triage_sessions_status {
  active
  completed
  escalated
  expired
}

enum medication_taken_history_status {
  taken
  skipped
  missed
}

enum pharmacist_consultations_consultation_type {
  chat
  video
  phone
}

enum drug_disposal_records_reason {
  expired
  damaged
  recalled
  other
}

enum emergency_alerts_severity {
  warning
  high
  critical
}

enum auto_replies_match_type {
  exact
  contains
  starts_with
  regex
}

enum birthday_campaigns_message_type {
  text
  flex
}

enum video_call_signals_sender_type {
  admin
  customer
}

enum broadcast_messages_target_type {
  all
  tag
  segment
}

enum liff_message_logs_status {
  sent
  failed
  pending
}

enum ai_triage_assessments_severity_level {
  low
  medium
  high
  critical
}

enum rich_menu_switch_log_trigger_type {
  rule
  manual
  event
  api
}

enum pharmacist_notifications_status {
  pending
  read
  handled
  dismissed
}

enum conversation_assignments_status {
  active
  resolved
  transferred
}

enum pos_transactions_customer_type {
  walk_in
  member
}

enum rewards_reward_type {
  discount
  product
  voucher
  shipping
}

enum liff_apps_view_type {
  full
  tall
  compact
}

enum landing_testimonials_status {
  pending
  approved
  rejected
}

enum wms_pick_items_status {
  pending
  picked
  short
  damaged
}

enum receipt_vouchers_payment_method {
  cash
  transfer
  cheque
  credit_card
}

enum drip_campaign_queue_status {
  pending
  sent
  failed
  cancelled
}

enum sync_batches_status {
  pending
  running
  completed
  failed
}

enum pharmacist_consultations_status {
  waiting
  in_progress
  completed
  cancelled
}

enum stock_adjustments_reason {
  physical_count
  damaged
  expired
  lost
  found
  correction
  other
}

enum location_movements_movement_type {
  put_away
  pick
  transfer
  adjustment
  disposal
}

enum payment_vouchers_payment_method {
  cash
  transfer
  cheque
  credit_card
}

enum user_drug_allergies_severity {
  mild
  moderate
  severe
}

enum warehouse_locations_ergonomic_level {
  golden
  upper
  lower
}

enum cleanup_actions_status {
  pending
  success
  failed
}

enum drug_interaction_acknowledgments_severity {
  mild
  moderate
  severe
}

enum pos_returns_refund_method {
  cash
  original
  credit
}

enum triage_sessions_triage_level {
  green
  yellow
  orange
  red
}

enum payment_slips_status {
  pending
  approved
  rejected
}

enum user_health_profiles_blood_type {
  A
  B
  AB
  O
  unknown
}

enum emergency_alerts_status {
  pending
  reviewed
  handled
  dismissed
}

enum scheduled_messages_repeat_type {
  none
  daily
  weekly
  monthly
}

enum appointments_status {
  pending
  confirmed
  completed
  cancelled
  no_show
}

enum orders_status {
  pending
  confirmed
  paid
  shipping
  delivered
  cancelled
}

enum broadcasts_status {
  draft
  scheduled
  sending
  sent
  failed
}

enum drug_pricing_rules_price_rounding {
  none
  nearest_5
  nearest_10
  up_5
  up_10
}

enum pos_transactions_discount_type {
  percent
  fixed
}

enum user_tags_source_type {
  manual
  auto
  broadcast
  system
}

enum user_profiles_extended_customer_type {
  new
  returning
  vip
  inactive
}

enum birthday_campaigns_discount_type {
  percent
  fixed
}

enum video_calls_status {
  pending
  ringing
  active
  reconnecting
  completed
  ended
  rejected
  error
  timeout
}

enum scheduled_messages_status {
  pending
  sent
  cancelled
}

enum cleanup_inventory_status {
  active
  deprecated
  archived
  deleted
}

enum ai_settings_ai_mode {
  pharmacist
  sales
  support
}

enum cleanup_backups_status {
  active
  restored
  archived
}

enum broadcast_campaigns_status {
  draft
  scheduled
  sending
  sent
  failed
}

enum orders_payment_status {
  pending
  paid
  failed
  refunded
}

enum pos_transaction_items_discount_type {
  percent
  fixed
}

enum products_item_type {
  physical
  digital
  service
  booking
  content
}

enum prescription_records_status {
  pending
  verified
  dispensed
  cancelled
}

enum stock_adjustments_status {
  draft
  confirmed
  cancelled
}

enum account_receivables_status {
  open
  partial
  paid
  cancelled
}

enum products_delivery_method {
  shipping
  email
  line
  download
  onsite
}

enum expenses_payment_status {
  unpaid
  paid
}

enum pos_shifts_status {
  open
  closed
}

enum broadcast_messages_status {
  draft
  scheduled
  sending
  sent
  failed
}

enum ai_triage_assessments_recommended_action {
  self_care
  consult_pharmacist
  see_doctor
  emergency
}

enum account_payables_status {
  open
  partial
  paid
  cancelled
}

enum pos_returns_status {
  pending
  completed
  cancelled
}

enum line_accounts_bot_mode {
  shop
  general
  auto_reply_only
}

enum transactions_payment_status {
  pending
  paid
  failed
  refunded
}

enum symptom_assessments_triage_level {
  green
  yellow
  orange
  red
}

enum business_items_delivery_method {
  shipping
  email
  line
  download
  onsite
}

enum triage_sessions_outcome {
  self_care
  otc_recommended
  refer_doctor
  emergency
}

enum symptom_assessments_status {
  in_progress
  completed
  referred
}

enum inventory_batches_status {
  active
  quarantine
  expired
  disposed
}

enum ai_triage_assessments_status {
  pending
  reviewed
  completed
}

enum pos_transactions_status {
  draft
  hold
  pending
  completed
  voided
  refunded
}

enum transactions_wms_status {
  pending_pick
  picking
  picked
  packing
  packed
  ready_to_ship
  shipped
  on_hold
}

enum products_drug_type {
  controlled
  dangerous
  household
  traditional
}

enum users_gender {
  male
  female
  other
}

enum business_items_movement_class {
  A
  B
  C
}

enum users_membership_level {
  bronze
  silver
  gold
  platinum
}

enum ems_discount_type {
  percent
  fixed
}
